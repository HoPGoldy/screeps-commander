(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],d=0,v=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},1116:function(t,e,a){"use strict";var n=a("9d5b"),i=a.n(n);i.a},"23c1":function(t,e,a){},5565:function(t,e,a){"use strict";var n=a("23c1"),i=a.n(n);i.a},"9d5b":function(t,e,a){},a336:function(t,e,a){},b12f:function(t,e,a){"use strict";var n=a("c183"),i=a.n(n);i.a},c183:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=a("bc3a"),s=a.n(i),o=a("4328"),r=a.n(o),c={screeps:"https://cors-anywhere.herokuapp.com/https://screeps.com"};s.a.interceptors.request.use((function(t){return t}));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"screeps",i=/http/.test(t)?t:c[n]+t;return s()({url:i,params:e,method:"get",headers:a})},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"screeps";e=r.a.stringify(e);var i=/http/.test(t)?t:c[n]+t;return s()({url:i,data:e,method:"post",headers:a})},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("div",[a("v-app-bar",{attrs:{color:"blue accent-3",dark:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.showSideDrawer=!t.showSideDrawer}}}),a("v-toolbar-title",[t._v("Screeps Commander")])],1)],1),a("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.showSideDrawer,callback:function(e){t.showSideDrawer=e},expression:"showSideDrawer"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v("Screeps Commander")]),a("v-list-item-subtitle",[t._v("@hopgoldy")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},t._l(t.items,(function(e){return a("v-list-item",{key:e.title,attrs:{link:""},on:{click:function(a){return t.onClickSidebar(e.comp,e.persistent)}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1),a("v-content",{attrs:{app:""}},[a("router-view")],1),a("v-dialog",{attrs:{eager:"",persistent:t.sidebarPersistent},model:{value:t.showSidebar,callback:function(e){t.showSidebar=e},expression:"showSidebar"}},[a(t.activeSidebar,{tag:"component",on:{"on-finish":t.onSidebarFinish}})],1),a("Boot",{attrs:{show:t.showBoot},on:{"on-finish":t.onBootFinish}}),a("v-snackbar",{attrs:{color:t.messageColor},model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:"showMessage"}},[t._v(t._s(t.messageText)),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showMessage=!1}}},[t._v("关闭")])],1)],1)},v=[],m=a("5530"),p=a("d4ec"),b=a("bee2"),h=a("99de"),f=a("7e84"),g=a("262e"),C=a("9ab4"),y=a("60a3"),k=(a("a434"),"screepsCommandStorage"),O="shard3",j=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"init",value:function(){var t=localStorage.getItem(k);t?this.dataBase=JSON.parse(t):(this.dataBase={shard:O,commands:[]},this.save())}},{key:"get",value:function(){return this.dataBase}},{key:"getOrigin",value:function(){var t=localStorage.getItem(k);return"string"===typeof t?t:""}},{key:"saveOrigin",value:function(t){localStorage.setItem(k,t)}},{key:"addNewCommand",value:function(t){this.dataBase.commands.push(t),this.save()}},{key:"updateCommand",value:function(t,e){t>=this.dataBase.commands.length||(this.dataBase.commands[t]=e,this.save())}},{key:"removeCommand",value:function(t){this.dataBase.commands.splice(t,1),this.save()}},{key:"setShard",value:function(t){this.dataBase.shard=t,this.save()}},{key:"save",value:function(){localStorage.setItem(k,JSON.stringify(this.dataBase))}},{key:"exist",get:function(){var t=localStorage.getItem(k);return"string"===typeof t}}]),e}(y["e"]);j=Object(C["a"])([y["a"]],j);var w=new j,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-overlay",{attrs:{value:t.show}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",light:""}},[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v(t._s(t.currentTitle))])]),a("v-window",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("div",{staticClass:"pa-2 pt-0"},t._l(t.introduceContent,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))]),a("div",{staticClass:"content"},[t._v(t._s(e.text))])],1)],1)})),1)]),a("v-window-item",{attrs:{value:2}},[a("v-card-text",{staticClass:"pt-0"},[a("v-text-field",{attrs:{label:"Screeps 登陆邮箱","hide-details":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"mt-2",attrs:{label:"Screeps 登陆密码","hide-details":"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"mt-5 caption grey--text text--darken-1"},[t._v("本应用不会记录您的任何身份信息，所以在退出应用后将需要重新登录。")])],1)],1),a("v-window-item",{attrs:{value:3}},[a("div",{staticClass:"pa-2 pt-0 text-center"},[a("v-list-item",[a("v-list-item-content",[a("div",{staticClass:"title mb-4"},[t._v("欢迎回来！")]),a("div",{staticClass:"subtitle-1"},[t._v("现在你可以直接与 Screeps 控制台进行交互，所有控制台输出也会直接反馈到本应用中。")]),a("div",{staticClass:"subtitle-1"},[t._v("同时你也可以自定义快捷命令来快速执行某些常用操作。点击左上角菜单来了解更多操作。")])])],1)],1)])],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{disabled:1===t.step,text:""},on:{click:function(e){t.step--}}},[t._v("上一步")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:"",loading:t.confirmBtnLoading},on:{click:t.next}},[t._v("确认")])],1)],1),a("v-snackbar",{attrs:{color:t.messageColor},model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:"showMessage"}},[t._v(t._s(t.messageText)),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showMessage=!1}}},[t._v("关闭")])],1)],1)},_=[],V=(a("99af"),a("caad"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("1276"),a("ddb0"),a("3835")),S=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"initScreepsApi",value:function(t,e){var a=this,n=this.getSessionToken(t,e).then((function(t){return a.getPlayerInfo(t)})),i=this.initWebSocket();return Promise.all([n,i]).then((function(t){var e=Object(V["a"])(t,2),n=e[0],i=e[1];return a.playerInfo=n,a.authSessionToken(i,n.sessionToken)})).then((function(t){var e=t.ws,n=t.sessionToken;return console.log("准备就绪！",n,e),a.screepsWebSock=e,a.playerInfo.sessionToken=n,a.subscribeConsole(a.screepsWebSock,a.playerInfo.userId)}))}},{key:"initWebSocket",value:function(){var t=this;return new Promise((function(e,a){var n="wss://screeps.com/socket/".concat(t.getRandStr("number",3),"/").concat(t.getRandStr("string",8),"/websocket");console.log("TCL: ScreepsApi -> screepsUrl",n);var i=new WebSocket(n);i.onopen=function(){return e(i)},i.onerror=function(t){return a(t)}}))}},{key:"getPlayerInfo",value:function(t){return new Promise((function(e,a){l("/api/auth/me",{},{"X-token":t}).then((function(t){200===t.status&&1===t.data.ok?e({username:t.data.username,userId:t.data._id,money:t.data.money,sessionToken:t.config.headers["X-token"]}):a(t.status)}))}))}},{key:"sendConsoleExpression",value:function(t,e){this.playerInfo&&u("/api/user/console",{expression:t,shard:e},{"X-token":this.playerInfo.sessionToken}).then((function(t){console.log(t)}))}},{key:"authSessionToken",value:function(t,e){return new Promise((function(a,n){t.send('["auth '.concat(e,'"]')),t.onmessage=function(e){if("a"===e.data[0]){var i=JSON.parse(e.data.substring(1))[0];i.includes("auth ok")?a({ws:t,sessionToken:i.split(" ")[2]}):i.includes("auth failed")&&n(e)}}}))}},{key:"subscribeConsole",value:function(t,e){return new Promise((function(a){t.send('["subscribe user:'.concat(e,'/console"]')),console.log("已订阅控制台"),a(t)}))}},{key:"getSessionToken",value:function(t,e){return new Promise((function(a,n){u("/api/auth/signin",{email:t,password:e}).then((function(t){200===t.status&&1===t.data.ok?a(t.data.token):(console.log("123",t),n(t))})).catch((function(t){return n(t)}))}))}},{key:"getRandStr",value:function(t,e){for(var a="number"===t?"0123456789":"abcdefghijklmnopqrstuvwxyz",n="",i=0;i<e;i++)n+=a.charAt(Math.floor(Math.random()*a.length));return n}},{key:"getDataInMessage",value:function(t){return"a"===t[0]||"m"===t[0]?JSON.parse(t.substr(1,t.length)):[""]}},{key:"closeWebSocket",value:function(){this.screepsWebSock&&this.screepsWebSock.close()}}]),e}(y["e"]);S=Object(C["a"])([y["a"]],S);var I=S,T=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.introduceContent=[{title:"数据",text:"本应用所有数据均保存在本地，自动或手动清除浏览器缓存将可能导致数据丢失（确保浏览器已退出无痕模式），请妥善使用导出 / 导入功能。"},{title:"开源",text:"本应用代码已开源至 github。更多信息请访问”关于“页。"}],t.step=1,t.email="",t.password="",t.confirmBtnLoading=!1,t.showMessage=!1,t.messageColor="success",t.messageText="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"finishBoot",value:function(){return w.init(),{email:this.email,password:this.password}}},{key:"next",value:function(){2===this.step?this.login():3===this.step?this.finishBoot():this.step++}},{key:"login",value:function(){var t=this;""!==this.email&&""!==this.password&&(this.confirmBtnLoading=!0,this.message("info","正在向 Screeps 服务器验证身份..."),this.getSessionToken(this.email,this.password).then((function(){t.step++,t.message("success","验证成功"),t.confirmBtnLoading=!1})).catch((function(){t.confirmBtnLoading=!1,t.message("error","验证失败，请验证用户名密码是否正确")})))}},{key:"message",value:function(t,e){this.messageColor=t,this.messageText=e,this.showMessage=!0}},{key:"currentTitle",get:function(){switch(this.step){case 1:return"使用须知";case 2:return"账户确认";case 3:return"";default:return"初始化"}}}]),e}(Object(y["c"])(I));Object(C["a"])([Object(y["d"])()],T.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-finish")],T.prototype,"finishBoot",null),T=Object(C["a"])([y["a"]],T);var B=T,L=B,P=(a("5565"),a("2877")),D=a("6544"),M=a.n(D),E=a("8336"),$=a("b0af"),N=a("99d9"),F=a("ce7e"),A=a("da13"),W=a("5d23"),J=a("a797"),R=a("2db4"),H=a("2fa4"),q=a("8654"),G=a("f665"),U=a("1e6c"),X=Object(P["a"])(L,x,_,!1,null,"7c11826e",null),z=X.exports;M()(X,{VBtn:E["a"],VCard:$["a"],VCardActions:N["a"],VCardText:N["b"],VCardTitle:N["c"],VDivider:F["a"],VListItem:A["a"],VListItemContent:W["a"],VListItemTitle:W["c"],VOverlay:J["a"],VSnackbar:R["a"],VSpacer:H["a"],VTextField:q["a"],VWindow:G["a"],VWindowItem:U["a"]});var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v(t._s(t.editMode?"编辑按钮":"添加新按钮"))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showHelp=!0}}},[a("v-icon",[t._v("mdi-help-circle-outline")])],1)],1),a("v-card-text",[a("v-text-field",{staticClass:"mb-4",attrs:{label:"名称","hide-details":"",clearable:""},model:{value:t.commandInfo.title,callback:function(e){t.$set(t.commandInfo,"title",e)},expression:"commandInfo.title"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"目标 shard","hide-details":"",clearable:""},model:{value:t.commandInfo.shard,callback:function(e){t.$set(t.commandInfo,"shard",e)},expression:"commandInfo.shard"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"命令","hide-details":"",clearable:""},model:{value:t.commandInfo.body,callback:function(e){t.$set(t.commandInfo,"body",e)},expression:"commandInfo.body"}}),a("div",{staticClass:"mt-5"},[t._l(t.params,(function(e,n){return[a("div",{staticClass:"mb-2 d-flex justify-space-between"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"error",small:"",icon:""},on:{click:function(e){return t.removeParam(n)}}},[a("v-icon",[t._v("mdi-close-circle")])],1),a("v-btn",{staticClass:"flex-grow-1",attrs:{small:""},on:{click:function(e){return t.editParam(n)}}},[a("span",[t._v(t._s(e.label))]),a("v-spacer"),a("span",[t._v(t._s(e.match))])],1)],1)]})),a("v-btn",{attrs:{block:"",small:""},on:{click:t.addNewParam}},[t._v("添加参数")])],2)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{depressed:"",width:"100"},on:{click:function(e){t.showCancelConfirm=!0}}},[t._v("放弃")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",width:"100",depressed:""},on:{click:t.saveNewButton}},[t._v(t._s(t.editMode?"保存":"创建"))])],1),a("v-dialog",{model:{value:t.showCancelConfirm,callback:function(e){t.showCancelConfirm=e},expression:"showCancelConfirm"}},[a("v-card",[a("v-card-text",{staticClass:"pa-4"},[a("div",{staticClass:"text-center mb-4"},[t._v("确认放弃编辑？"+t._s(t.editMode?"新修改的内容不会被保存":"该按钮的所有配置都将被清空。"))]),a("v-btn",{attrs:{color:"error",block:""},on:{click:t.cancel}},[t._v("确认")])],1)],1)],1),a("button-help",{attrs:{show:t.showHelp},on:{"on-close":function(e){t.showHelp=!1}}}),a("param-config",{attrs:{show:t.showParamConfig},on:{"on-cancel":function(e){t.showParamConfig=!1},"on-confirm":t.updateParam},model:{value:t.editParamData,callback:function(e){t.editParamData=e},expression:"editParamData"}})],1)},Q=[],Y=(a("d81d"),a("466d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{on:{"click:outside":t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-text",{staticClass:"pa-2"},t._l(t.info,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(t._s(e.title))]),a("div",{staticClass:"pt-1 lh"},[t._v(t._s(e.content))]),e.code?a("code",{staticClass:"mt-2 pa-1"},[t._v(t._s(e.code))]):t._e()],1)],1)})),1)],1)],1)}),Z=[],tt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.info=[{title:"命令",content:"命令是点击该按钮时发送到 screeps 的代码主体。支持任何可以在游戏控制台中执行的表达式。如下：",code:"Object.key(Game.creeps).length"},{title:"参数",content:"为了提高功能性，你可以通过新建多个参数来实现诸如 ”从某房发送某资源到某房“ 的操作。参数会在点击按钮时通过弹出框进行收集。"},{title:"占位符",content:"占位符代表着参数将要插入到的命令位置，参数在新建时会自动分配一个无法修改的占位符（以 $ 开头）。如果在命令中没有找到对应的占位符，该参数将被抛弃。",code:"Game.rooms.$1.controller.level"}],t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onClose",value:function(){}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0})],tt.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-close")],tt.prototype,"onClose",null),tt=Object(C["a"])([y["a"]],tt);var et=tt,at=et,nt=(a("b12f"),a("169a")),it=Object(P["a"])(at,Y,Z,!1,null,"d416d130",null),st=it.exports;M()(it,{VCard:$["a"],VCardText:N["b"],VDialog:nt["a"],VListItem:A["a"],VListItemContent:W["a"],VListItemTitle:W["c"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("参数配置")]),a("v-card-text",[a("v-text-field",{attrs:{label:"占位符","hide-details":"",disabled:""},model:{value:t.value.match,callback:function(e){t.$set(t.value,"match",e)},expression:"value.match"}}),a("v-text-field",{staticClass:"mt-4",attrs:{rules:t.rules,counter:"10",label:"标签",clearable:""},model:{value:t.value.label,callback:function(e){t.$set(t.value,"label",e)},expression:"value.label"}}),a("v-text-field",{attrs:{label:"默认值","hide-details":"",clearable:""},model:{value:t.value.default,callback:function(e){t.$set(t.value,"default",e)},expression:"value.default"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{on:{click:t.cancel}},[t._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.confirm}},[t._v("确定")])],1)],1)],1)},rt=[],ct=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.rules=[function(t){return!t||t.length<=10||"超过字数限制"}],t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"confirm",value:function(){return""===this.value.label&&(this.value.label="未命名参数"),this.value.label.length>10&&(this.value.label=this.value.label.substring(0,10)),this.value}},{key:"cancel",value:function(){}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0,default:{match:"",default:"",label:""}})],ct.prototype,"value",void 0),Object(C["a"])([Object(y["d"])({required:!0})],ct.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-confirm")],ct.prototype,"confirm",null),Object(C["a"])([Object(y["b"])("on-cancel")],ct.prototype,"cancel",null),ct=Object(C["a"])([y["a"]],ct);var lt=ct,ut=lt,dt=Object(P["a"])(ut,ot,rt,!1,null,null,null),vt=dt.exports;M()(dt,{VBtn:E["a"],VCard:$["a"],VCardActions:N["a"],VCardText:N["b"],VCardTitle:N["c"],VDialog:nt["a"],VDivider:F["a"],VSpacer:H["a"],VTextField:q["a"]});var mt={ButtonHelp:st,ParamConfig:vt},pt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.editMode=!1,t.params=[],t.showCancelConfirm=!1,t.showHelp=!1,t.showParamConfig=!1,t.editParamIndex=0,t.editParamData={label:"",default:"",match:""},t.commandInfo={title:"新按钮",shard:O,body:"Game.time"},t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"switchToEditMode",value:function(t){if(!(this.editIndex<0)){this.editMode=!0;var e=w.get().commands[t];this.params=e.param,this.commandInfo=e}}},{key:"addNewParam",value:function(){var t=this.params.length,e=this.params.map((function(t){return t.match}));while(e.includes("$".concat(t)))t+=1;this.params.push({label:"参数".concat(t),default:"",match:"$".concat(t)})}},{key:"removeParam",value:function(t){this.params.splice(t,1)}},{key:"editParam",value:function(t){this.editParamIndex=t,this.editParamData=this.params[t],this.showParamConfig=!0}},{key:"updateParam",value:function(t){this.showParamConfig=!1,this.params[this.editParamIndex]=t}},{key:"saveNewButton",value:function(){var t=this.editMode?"保存成功":"添加成功，点击右下角按钮查看";return this.editMode?w.updateCommand(this.editIndex,Object(m["a"])({},this.commandInfo,{param:this.params})):w.addNewCommand(Object(m["a"])({},this.commandInfo,{param:this.params})),{show:!0,color:"success",content:t}}},{key:"cancel",value:function(){return{show:!1}}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])()],pt.prototype,"editIndex",void 0),Object(C["a"])([Object(y["f"])("editIndex")],pt.prototype,"switchToEditMode",null),Object(C["a"])([Object(y["b"])("on-finish")],pt.prototype,"saveNewButton",null),Object(C["a"])([Object(y["b"])("on-finish")],pt.prototype,"cancel",null),pt=Object(C["a"])([Object(y["a"])({components:Object(m["a"])({},mt)})],pt);var bt=pt,ht=bt,ft=a("132d"),gt=Object(P["a"])(ht,K,Q,!1,null,null,null),Ct=gt.exports;M()(gt,{VBtn:E["a"],VCard:$["a"],VCardActions:N["a"],VCardText:N["b"],VCardTitle:N["c"],VDialog:nt["a"],VDivider:F["a"],VIcon:ft["a"],VSpacer:H["a"],VTextField:q["a"]});var yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("按钮配置")]),a("v-list",t._l(t.commands,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("v-list-item",[a("span",[t._v(t._s(e.title))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.editButton(n)}}},[a("v-icon",[t._v("mdi-pencil-plus")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.buttonRemovePrepare(n)}}},[a("v-icon",{attrs:{color:"error"}},[t._v("mdi-delete")])],1)],1),n!=t.commands.length-1?a("v-divider"):t._e()],1)})),0),0===t.commands.length?a("div",{staticClass:"d-flex justify-center align-center pb-4 text--secondary"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"grey lighten-1"}},[t._v("mdi-emoticon-sad")]),a("div",[t._v("暂无按钮")])],1):t._e(),a("v-dialog",{model:{value:t.removeConfirmVisiable,callback:function(e){t.removeConfirmVisiable=e},expression:"removeConfirmVisiable"}},[a("v-card",[a("v-card-text",{staticClass:"pa-4"},[a("div",{staticClass:"text-center mb-4"},[t._v("确认删除？该按钮的所有配置都将被清空。")]),a("v-btn",{attrs:{color:"error",block:""},on:{click:t.removeButton}},[t._v("确认")])],1)],1)],1),a("v-dialog",{attrs:{eager:"",persistent:""},model:{value:t.editVisiable,callback:function(e){t.editVisiable=e},expression:"editVisiable"}},[a("button-edit",{attrs:{"edit-index":t.editIndex},on:{"on-finish":t.onEditFinish}})],1)],1)},kt=[],Ot=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.removeConfirmVisiable=!1,t.waitRemoveButtonIndex=0,t.commands=w.get().commands,t.editVisiable=!1,t.editIndex=-1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"buttonRemovePrepare",value:function(t){this.waitRemoveButtonIndex=t,this.removeConfirmVisiable=!0}},{key:"removeButton",value:function(){this.removeConfirmVisiable=!1,w.removeCommand(this.waitRemoveButtonIndex)}},{key:"editButton",value:function(t){this.editVisiable=!0,this.editIndex=t}},{key:"onEditFinish",value:function(){this.editIndex=-1,this.editVisiable=!1}}]),e}(y["e"]);Ot=Object(C["a"])([Object(y["a"])({components:{ButtonEdit:Ct}})],Ot);var jt=Ot,wt=jt,xt=a("8860"),_t=Object(P["a"])(wt,yt,kt,!1,null,"ca82d184",null),Vt=_t.exports;M()(_t,{VBtn:E["a"],VCard:$["a"],VCardText:N["b"],VCardTitle:N["c"],VDialog:nt["a"],VDivider:F["a"],VIcon:ft["a"],VList:xt["a"],VListItem:A["a"],VSpacer:H["a"]});var St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v("设置默认 shard")])]),a("v-card-text",{staticClass:"pt-0"},[a("v-text-field",{attrs:{label:"shard 名称","hide-details":""},model:{value:t.shard,callback:function(e){t.shard=e},expression:"shard"}}),a("div",{staticClass:"mt-5 caption grey--text text--darken-1"},[t._v("用于确定本应用控制台命令发送到的 shard（默认为 shard3）")])],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{depressed:""},on:{click:t.cancel}},[t._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:""},on:{click:t.confirm}},[t._v("确认")])],1)],1)},It=[],Tt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.shard="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"confirm",value:function(){""===this.shard&&(this.shard=O),w.setShard(this.shard),this.finish()}},{key:"finish",value:function(){return{show:!0,content:"已将控制台输出重定向到 ".concat(this.shard),color:"success"}}},{key:"cancel",value:function(){return{show:!1}}},{key:"mounted",value:function(){this.shard=w.get().shard}}]),e}(y["e"]);Object(C["a"])([Object(y["b"])("on-finish")],Tt.prototype,"finish",null),Object(C["a"])([Object(y["b"])("on-finish")],Tt.prototype,"cancel",null),Tt=Object(C["a"])([y["a"]],Tt);var Bt=Tt,Lt=Bt,Pt=Object(P["a"])(Lt,St,It,!1,null,"63ae8646",null),Dt=Pt.exports;M()(Pt,{VBtn:E["a"],VCard:$["a"],VCardActions:N["a"],VCardText:N["b"],VCardTitle:N["c"],VDivider:F["a"],VSpacer:H["a"],VTextField:q["a"]});var Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"py-5 text-center"},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(t.introduce))]),a("v-text-field",{attrs:{label:"粘贴至此处","hide-details":"",clearable:""},model:{value:t.newConfig,callback:function(e){t.newConfig=e},expression:"newConfig"}})],1),a("v-card-actions",[t.statsConfirm?a("v-btn",{on:{click:t.cancelLoad}},[t._v("取消")]):t._e(),t.statsConfirm?a("v-spacer"):t._e(),a("v-btn",{attrs:{block:!t.statsConfirm,color:t.btnColor,dark:""},on:{click:t.confirmLoad}},[t._v(t._s(t.btnText))])],1)],1)},Et=[],$t=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.newConfig="",t.statsConfirm=!1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"confirmLoad",value:function(){""!==this.newConfig&&(this.statsConfirm?this.loadConfig():this.statsConfirm=!0)}},{key:"cancelLoad",value:function(){this.statsConfirm=!1}},{key:"loadConfig",value:function(){this.statsConfirm=!1,this.newConfig="",w.saveOrigin(this.newConfig),this.finish()}},{key:"finish",value:function(){return{show:!0,content:"导入成功，刷新页面来应用新配置项",color:"success"}}},{key:"introduce",get:function(){return this.statsConfirm?"接下来的操作会覆盖你的现存配置项，是否继续？":"将加密后的配置项粘贴到下方并点击”应用“按钮来导入配置项。"}},{key:"btnText",get:function(){return this.statsConfirm?"我了解，确认":"应用"}},{key:"btnColor",get:function(){return this.statsConfirm?"error":"primary"}}]),e}(y["e"]);Object(C["a"])([Object(y["b"])("on-finish")],$t.prototype,"finish",null),$t=Object(C["a"])([y["a"]],$t);var Nt=$t,Ft=Nt,At=Object(P["a"])(Ft,Mt,Et,!1,null,null,null),Wt=At.exports;M()(At,{VBtn:E["a"],VCard:$["a"],VCardActions:N["a"],VCardText:N["b"],VSpacer:H["a"],VTextField:q["a"]});var Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"text-center"},[a("div",{staticClass:"subtitle-1 pt-5"},[t._v("点击下方按钮导出配置项到剪切板，或直接手动复制。")]),a("v-text-field",{staticClass:"mb-4",attrs:{"hide-details":""},model:{value:t.copyContent,callback:function(e){t.copyContent=e},expression:"copyContent"}}),a("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copyContent,expression:"copyContent",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{block:"",color:"primary",dark:""}},[t._v("导出配置项")])],1)],1)},Rt=[],Ht=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.copyContent="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onCopy",value:function(){return{show:!0,content:"已导出到剪切板",color:"success"}}},{key:"onError",value:function(){return{show:!0,content:"异常，可能已经导出完成，请粘贴确认",color:"error"}}},{key:"mounted",value:function(){this.copyContent=w.getOrigin()}}]),e}(y["e"]);Object(C["a"])([Object(y["b"])("on-finish")],Ht.prototype,"onCopy",null),Object(C["a"])([Object(y["b"])("on-finish")],Ht.prototype,"onError",null),Ht=Object(C["a"])([y["a"]],Ht);var qt=Ht,Gt=qt,Ut=Object(P["a"])(Gt,Jt,Rt,!1,null,"6bac86d7",null),Xt=Ut.exports;M()(Ut,{VBtn:E["a"],VCard:$["a"],VCardText:N["b"],VTextField:q["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"pa-2"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("作者")]),a("div",{staticClass:"pt-1"},[a("span",[t._v("本应用由")]),a("a",{on:{click:function(e){return t.openPage(t.homePage)}}},[t._v(" HoPGoldy")]),a("span",[t._v(" 制作并开源。")])])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("数据")]),a("div",{staticClass:"pt-1"},[t._v("本应用所有数据均保存在本地，自动或手动清除浏览器缓存将可能导致数据丢失（确保浏览器已退出无痕模式），请妥善使用导出 / 导入功能。")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("隐私")]),a("div",{staticClass:"pt-1"},[t._v("本应用不会保存您的 Screeps 账号密码，所以在退出应用后您可能需要重新登录。")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("开源")]),a("div",{staticClass:"pt-1"},[a("span",[t._v("本应用代码已开源至 github。点击")]),a("a",{on:{click:function(e){return t.openPage(t.githubUrl)}}},[t._v(" 此处")]),a("span",[t._v(" 来访问本项目源码。")])])],1)],1)],1)],1)},Kt=[],Qt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.githubUrl="https://github.com/HoPGoldy/screeps-commander",t.homePage="https://hopgoldy.github.io/",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"openPage",value:function(t){window.open(t)}}]),e}(y["e"]);Qt=Object(C["a"])([y["a"]],Qt);var Yt=Qt,Zt=Yt,te=Object(P["a"])(Zt,zt,Kt,!1,null,null,null),ee=te.exports;M()(te,{VCard:$["a"],VCardText:N["b"],VListItem:A["a"],VListItemContent:W["a"],VListItemTitle:W["c"]});var ae={ButtonEdit:Ct,ButtonConfig:Vt,ShardSetter:Dt,LoadConfig:Wt,SaveConfig:Xt,About:ee},ne=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.items=[{title:"创建新按钮",comp:"button-edit",icon:"mdi-plus-box-multiple",persistent:!0},{title:"配置按钮",comp:"button-config",icon:"mdi-cursor-default-click",persistent:!1},{title:"设置 shard",comp:"shard-setter",icon:"mdi-server",persistent:!1},{title:"导出配置项",comp:"save-config",icon:"mdi-download-multiple",persistent:!1},{title:"导入配置项",comp:"load-config",icon:"mdi-upload-multiple",persistent:!1},{title:"关于",comp:"about",icon:"mdi-help-box",persistent:!1}],t.showSideDrawer=!1,t.showSidebar=!1,t.sidebarPersistent=!1,t.activeSidebar="save-config",t.showBoot=!1,t.showMessage=!1,t.messageColor="success",t.messageText="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onBootFinish",value:function(){this.showBoot=!1}},{key:"onClickSidebar",value:function(t,e){this.showSidebar=!0,this.showSideDrawer=!1,this.activeSidebar=t,this.sidebarPersistent=e}},{key:"onSidebarFinish",value:function(t){this.showSidebar=!1,t.show&&this.message(t.color||"success",t.content||"设置成功")}},{key:"message",value:function(t,e){this.messageColor=t,this.messageText=e,this.showMessage=!0}},{key:"mounted",value:function(){w.exist?w.init():this.showBoot=!0}}]),e}(y["e"]);ne=Object(C["a"])([Object(y["a"])({components:Object(m["a"])({Boot:z},ae)})],ne);var ie=ne,se=ie,oe=(a("d799"),a("7496")),re=a("40dc"),ce=a("5bc1"),le=a("a75b"),ue=a("34c3"),de=a("f774"),ve=a("2a7f"),me=Object(P["a"])(se,d,v,!1,null,"d6c65228",null),pe=me.exports;M()(me,{VApp:oe["a"],VAppBar:re["a"],VAppBarNavIcon:ce["a"],VBtn:E["a"],VContent:le["a"],VDialog:nt["a"],VDivider:F["a"],VIcon:ft["a"],VList:xt["a"],VListItem:A["a"],VListItemContent:W["a"],VListItemIcon:ue["a"],VListItemSubtitle:W["b"],VListItemTitle:W["c"],VNavigationDrawer:de["a"],VSnackbar:R["a"],VToolbarTitle:ve["a"]});var be=a("8c4f"),he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{flat:""}},[a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.messageList,(function(t,e){return a("div",{key:e,staticClass:"item"},[a("ConsoleItem",{attrs:{content:t.content,icon:t.icon}})],1)})),0),a("div",{ref:"itemList",staticClass:"fill-block"}),a("v-text-field",{staticClass:"input-box ma-4 mr-8",attrs:{rounded:"",label:"键入命令",solo:"","hide-details":"",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendCommand(e)}},model:{value:t.inputCommand,callback:function(e){t.inputCommand=e},expression:"inputCommand"}}),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.inputCommand&&t.inputCommand.length>0,expression:"inputCommand && inputCommand.length > 0"}],staticClass:"fab-btn",attrs:{color:"green",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:t.sendCommand}},[a("v-icon",[t._v("mdi-arrow-right-thick")])],1)],1),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.inputCommand||t.inputCommand.length<=0,expression:"!inputCommand || inputCommand.length <= 0"}],staticClass:"fab-btn",attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:t.showCommandList}},[a("v-icon",[t._v("mdi-code-braces")])],1)],1),a("v-bottom-sheet",{model:{value:t.commandListVisiable,callback:function(e){t.commandListVisiable=e},expression:"commandListVisiable"}},[a("command-list",{on:{select:t.getCommand},model:{value:t.commandsData,callback:function(e){t.commandsData=e},expression:"commandsData"}})],1)],1)},fe=[],ge=(a("a15b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"console-item-contaienr"},[a("v-list-item",[a("v-list-item-icon",{staticClass:"my-3 mr-4"},[a("v-icon",[t._v(t._s(t.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.content))])],1)],1),a("v-divider")],1)}),Ce=[],ye=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(y["e"]);Object(C["a"])([Object(y["d"])()],ye.prototype,"content",void 0),Object(C["a"])([Object(y["d"])()],ye.prototype,"icon",void 0),ye=Object(C["a"])([y["a"]],ye);var ke=ye,Oe=ke,je=Object(P["a"])(Oe,ge,Ce,!1,null,"faea2392",null),we=je.exports;M()(je,{VDivider:F["a"],VIcon:ft["a"],VListItem:A["a"],VListItemContent:W["a"],VListItemIcon:ue["a"],VListItemTitle:W["c"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",t._l(t.value,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("v-list-item",{on:{click:function(a){return t.onCommandClick(e)}}},[a("v-chip",{staticClass:"mr-3",attrs:{small:"",disabled:""}},[t._v(t._s(e.shard))]),a("span",[t._v(t._s(e.title))])],1),n!=t.value.length-1?a("v-divider"):t._e()],1)})),0)},_e=[],Ve=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onCommandClick",value:function(t){t.param.length>0?console.log("收集参数！"):this.sendCommand(t.body)}},{key:"sendCommand",value:function(t){return console.log(t),t}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0,default:[]})],Ve.prototype,"value",void 0),Object(C["a"])([Object(y["b"])("select")],Ve.prototype,"sendCommand",null),Ve=Object(C["a"])([y["a"]],Ve);var Se=Ve,Ie=Se,Te=a("cc20"),Be=Object(P["a"])(Ie,xe,_e,!1,null,"4b9bb522",null),Le=Be.exports;M()(Be,{VChip:Te["a"],VDivider:F["a"],VList:xt["a"],VListItem:A["a"]});var Pe=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.messageList=[],t.commandListVisiable=!1,t.inputCommand="",t.commandsData=[],t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"sendCommand",value:function(){!this.inputCommand||this.inputCommand.length<=0||(this.sendConsoleExpression(this.inputCommand,"shard3"),this.messageList.push({content:this.inputCommand,icon:"mdi-arrow-top-left"}),this.inputCommand="",this.$vuetify.goTo(this.$refs.itemList,{duration:1e3}))}},{key:"getCommand",value:function(t){this.commandListVisiable=!1}},{key:"onMessage",value:function(t){if("a"===t.data[0])try{var e=JSON.parse(t.data.substring(1))[0],a=JSON.parse(e)[1],n=a.messages.results;if(n.length<=0)return;this.messageList.push({content:n.join("|||"),icon:"mdi-arrow-bottom-right"})}catch(i){}}},{key:"mounted",value:function(){}},{key:"showCommandList",value:function(){this.commandsData=w.get().commands,this.commandListVisiable=!0}},{key:"destroyed",value:function(){this.closeWebSocket()}}]),e}(Object(y["c"])(I));Pe=Object(C["a"])([Object(y["a"])({components:{ConsoleItem:we,CommandList:Le}})],Pe);var De=Pe,Me=De,Ee=(a("1116"),a("288c")),$e=a("0789"),Ne=a("1baa"),Fe=Object(P["a"])(Me,he,fe,!1,null,"2060f1af",null),Ae=Fe.exports;M()(Fe,{VBottomSheet:Ee["a"],VBtn:E["a"],VFabTransition:$e["c"],VIcon:ft["a"],VList:xt["a"],VListItemGroup:Ne["a"],VTextField:q["a"]}),n["a"].use(be["a"]);var We=[{path:"/",redirect:"/console"},{path:"/console",component:Ae}],Je=new be["a"]({routes:We}),Re=a("f309");n["a"].use(Re["a"]);var He=new Re["a"]({}),qe=a("4eb5"),Ge=a.n(qe);Ge.a.config.autoSetContainer=!0,n["a"].use(Ge.a),n["a"].config.productionTip=!1,new n["a"]({router:Je,vuetify:He,render:function(t){return t(pe)}}).$mount("#app")},d799:function(t,e,a){"use strict";var n=a("a336"),i=a.n(n);i.a}});
//# sourceMappingURL=app.36a71e1a.js.map