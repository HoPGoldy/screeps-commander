(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],u=0,v=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(v.length)v.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"143e":function(t,e,a){},"1c12":function(t,e,a){"use strict";var n=a("9c2f"),i=a.n(n);i.a},"57e4":function(t,e,a){},7962:function(t,e,a){"use strict";var n=a("57e4"),i=a.n(n);i.a},"9c2f":function(t,e,a){},"9e8e":function(t,e,a){},bb25:function(t,e,a){"use strict";var n=a("9e8e"),i=a.n(n);i.a},cb55:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=a("bc3a"),s=a.n(i),o=a("4328"),r=a.n(o),c={screeps:"https://cors-anywhere.herokuapp.com/https://screeps.com"};s.a.interceptors.request.use((function(t){return t}));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"screeps",i=/http/.test(t)?t:c[n]+t;return s()({url:i,params:e,method:"get",headers:a})},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"screeps";e=r.a.stringify(e);var i=/http/.test(t)?t:c[n]+t;return s()({url:i,data:e,method:"post",headers:a})},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("div",[a("v-app-bar",{attrs:{color:"blue accent-3",dark:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.showSideDrawer=!t.showSideDrawer}}}),a("v-toolbar-title",[t._v("Screeps Commander")])],1)],1),a("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.showSideDrawer,callback:function(e){t.showSideDrawer=e},expression:"showSideDrawer"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v("Screeps Commander")]),a("v-list-item-subtitle",[t._v("@hopgoldy")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},t._l(t.items,(function(e){return a("v-list-item",{key:e.title,attrs:{link:""},on:{click:function(a){return t.onClickSidebar(e.comp,e.persistent)}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1),a("v-content",{attrs:{app:""}},[a("router-view")],1),a("v-dialog",{attrs:{eager:"",persistent:t.sidebarPersistent},model:{value:t.showSidebar,callback:function(e){t.showSidebar=e},expression:"showSidebar"}},[a(t.activeSidebar,{tag:"component",on:{"on-finish":t.onSidebarFinish}})],1)],1)},v=[],m=a("5530"),p=a("d4ec"),b=a("bee2"),h=a("99de"),f=a("7e84"),g=a("262e"),y=a("9ab4"),C=a("60a3"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v(t._s(t.editMode?"编辑按钮":"添加新按钮"))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showHelp=!0}}},[a("v-icon",[t._v("mdi-help-circle-outline")])],1)],1),a("v-card-text",[a("v-text-field",{staticClass:"mb-4",attrs:{label:"名称","hide-details":"",clearable:""},model:{value:t.commandInfo.title,callback:function(e){t.$set(t.commandInfo,"title",e)},expression:"commandInfo.title"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"目标 shard（置空以使用全局 shard）","hide-details":"",clearable:""},model:{value:t.commandInfo.shard,callback:function(e){t.$set(t.commandInfo,"shard",e)},expression:"commandInfo.shard"}}),a("v-textarea",{staticClass:"mb-4",attrs:{label:"命令","hide-details":"","auto-grow":"",clearable:"",rows:"1"},model:{value:t.commandInfo.body,callback:function(e){t.$set(t.commandInfo,"body",e)},expression:"commandInfo.body"}}),a("div",{staticClass:"mt-5"},[t._l(t.params,(function(e,n){return[a("div",{staticClass:"mb-2 d-flex justify-space-between"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"error",small:"",icon:""},on:{click:function(e){return t.removeParam(n)}}},[a("v-icon",[t._v("mdi-close-circle")])],1),a("v-btn",{staticClass:"flex-grow-1",attrs:{small:""},on:{click:function(e){return t.editParam(n)}}},[a("span",{staticClass:"d-inline-block text-truncate text-no-wrap"},[t._v(t._s(e.label))]),a("v-spacer"),a("span",[t._v(t._s(e.match))])],1)],1)]})),a("v-btn",{attrs:{block:"",small:""},on:{click:t.addNewParam}},[t._v("添加参数")])],2)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{depressed:"",width:"100"},on:{click:function(e){t.showCancelConfirm=!0}}},[t._v(t._s(t.editMode?"返回":"放弃"))]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",width:"100",depressed:""},on:{click:t.saveNewButton}},[t._v(t._s(t.editMode?"保存":"创建"))])],1),a("v-dialog",{model:{value:t.showCancelConfirm,callback:function(e){t.showCancelConfirm=e},expression:"showCancelConfirm"}},[a("v-card",[a("v-card-text",{staticClass:"pa-4"},[a("div",{staticClass:"text-center mb-4"},[t._v("确认放弃编辑？"+t._s(t.editMode?"新修改的内容不会被保存":"该按钮的所有配置都将被清空。"))]),a("v-btn",{attrs:{color:"error",block:""},on:{click:t.cancel}},[t._v("确认")])],1)],1)],1),a("button-help",{attrs:{show:t.showHelp},on:{"on-close":function(e){t.showHelp=!1}}}),a("param-config",{attrs:{show:t.showParamConfig},on:{"on-cancel":function(e){t.showParamConfig=!1},"on-confirm":t.updateParam},model:{value:t.editParamData,callback:function(e){t.editParamData=e},expression:"editParamData"}})],1)},O=[],j=(a("caad"),a("d81d"),a("a434"),a("ac1f"),a("2532"),a("466d"),"screepsCommandStorage"),w="shard3",V=[{title:"查看 tick 时间",shard:"shard3",body:"Game.time",param:[]},{title:"查看 Creep 数量",shard:"shard3",body:"Object.keys(Game.creeps).length",param:[]},{title:"查看指定房间 RCL",shard:"shard3",body:"Game.rooms.$0.controller.level",param:[{label:"查看房间",default:"W1N1",match:"$0"}]}],x=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"init",value:function(){var t=localStorage.getItem(j);t?this.dataBase=JSON.parse(t):(this.dataBase={shard:w,commands:V},this.save())}},{key:"get",value:function(){return this.dataBase}},{key:"getOrigin",value:function(){var t=localStorage.getItem(j);return"string"===typeof t?t:""}},{key:"saveOrigin",value:function(t){localStorage.setItem(j,t),this.init()}},{key:"addNewCommand",value:function(t){this.dataBase.commands.push(t),this.save()}},{key:"updateCommand",value:function(t,e){t>=this.dataBase.commands.length||(this.dataBase.commands[t]=e,this.save())}},{key:"removeCommand",value:function(t){this.dataBase.commands.splice(t,1),this.save()}},{key:"setShard",value:function(t){this.dataBase.shard=t,this.save()}},{key:"save",value:function(){localStorage.setItem(j,JSON.stringify(this.dataBase))}},{key:"exist",get:function(){var t=localStorage.getItem(j);return"string"===typeof t}}]),e}(C["e"]);x=Object(y["a"])([C["a"]],x);var _=new x,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{on:{"click:outside":t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-text",{staticClass:"pa-2"},t._l(t.info,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(t._s(e.title))]),a("div",{staticClass:"pt-1 lh"},[t._v(t._s(e.content))]),e.code?a("code",{staticClass:"mt-2 pa-1"},[t._v(t._s(e.code))]):t._e()],1)],1)})),1)],1)],1)},I=[],P=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.info=[{title:"命令",content:"命令是点击该按钮时发送到 screeps 的代码主体。支持任何可以在游戏控制台中执行的表达式。如下：",code:"Object.key(Game.creeps).length"},{title:"参数",content:"为了提高功能性，你可以通过新建多个参数来实现诸如 ”从某房发送某资源到某房“ 的操作。参数会在点击按钮时通过弹出框进行收集。"},{title:"占位符",content:"占位符代表着参数将要插入到的命令位置，参数在新建时会自动分配以 $ 开头的占位符。如果在命令中没有找到对应的占位符，该参数将被抛弃。占位符允许在命令中出现多次。",code:"Game.rooms.$1.controller.level"}],t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onClose",value:function(){}}]),e}(C["e"]);Object(y["a"])([Object(C["d"])({required:!0})],P.prototype,"show",void 0),Object(y["a"])([Object(C["b"])("on-close")],P.prototype,"onClose",null),P=Object(y["a"])([C["a"]],P);var T=P,L=T,B=(a("f035"),a("2877")),$=a("6544"),D=a.n($),N=a("b0af"),M=a("99d9"),E=a("169a"),F=a("da13"),A=a("5d23"),W=Object(B["a"])(L,S,I,!1,null,"5d709b86",null),J=W.exports;D()(W,{VCard:N["a"],VCardText:M["b"],VDialog:E["a"],VListItem:F["a"],VListItemContent:A["a"],VListItemTitle:A["c"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("参数配置")]),a("v-card-text",[a("v-text-field",{attrs:{label:"占位符","hide-details":"",disabled:""},model:{value:t.value.match,callback:function(e){t.$set(t.value,"match",e)},expression:"value.match"}}),a("v-text-field",{staticClass:"mt-4",attrs:{rules:t.rules,counter:t.inputLimit,label:"标签",clearable:""},model:{value:t.value.label,callback:function(e){t.$set(t.value,"label",e)},expression:"value.label"}}),a("v-text-field",{attrs:{label:"默认值","hide-details":"",clearable:""},model:{value:t.value.default,callback:function(e){t.$set(t.value,"default",e)},expression:"value.default"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{on:{click:t.cancel}},[t._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.confirm}},[t._v("确定")])],1)],1)],1)},G=[],R=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.inputLimit=20,t.rules=[function(e){return!e||e.length<=t.inputLimit||"超过字数限制"}],t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"confirm",value:function(){return""===this.value.label&&(this.value.label="未命名参数"),this.value.label.length>this.inputLimit&&(this.value.label=this.value.label.substring(0,this.inputLimit)),this.value}},{key:"cancel",value:function(){}}]),e}(C["e"]);Object(y["a"])([Object(C["d"])({required:!0,default:{match:"",default:"",label:""}})],R.prototype,"value",void 0),Object(y["a"])([Object(C["d"])({required:!0})],R.prototype,"show",void 0),Object(y["a"])([Object(C["b"])("on-confirm")],R.prototype,"confirm",null),Object(y["a"])([Object(C["b"])("on-cancel")],R.prototype,"cancel",null),R=Object(y["a"])([C["a"]],R);var H=R,U=H,X=a("8336"),z=a("ce7e"),K=a("2fa4"),Q=a("8654"),Y=Object(B["a"])(U,q,G,!1,null,null,null),Z=Y.exports;D()(Y,{VBtn:X["a"],VCard:N["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:M["c"],VDialog:E["a"],VDivider:z["a"],VSpacer:K["a"],VTextField:Q["a"]});var tt={ButtonHelp:J,ParamConfig:Z},et=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.editMode=!1,t.params=[],t.showCancelConfirm=!1,t.showHelp=!1,t.showParamConfig=!1,t.editParamIndex=0,t.editParamData={label:"",default:"",match:""},t.commandInfo={title:"新按钮",shard:w,body:"Game.time"},t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"switchToEditMode",value:function(t){if(!(this.editIndex<0)){this.editMode=!0;var e=JSON.parse(JSON.stringify(_.get().commands[t]));this.params=e.param,this.commandInfo=e}}},{key:"addNewParam",value:function(){var t=this.params.length,e=this.params.map((function(t){return t.match}));while(e.includes("$".concat(t)))t+=1;this.params.push({label:"参数".concat(t),default:"",match:"$".concat(t)})}},{key:"removeParam",value:function(t){this.params.splice(t,1)}},{key:"editParam",value:function(t){this.editParamIndex=t,this.editParamData=this.params[t],this.showParamConfig=!0}},{key:"updateParam",value:function(t){this.showParamConfig=!1,this.params[this.editParamIndex]=t}},{key:"reset",value:function(){this.params=[],this.commandInfo={title:"新按钮",shard:w,body:"Game.time"}}},{key:"saveNewButton",value:function(){var t=this.editMode?"保存成功":"添加成功，点击右下角按钮查看",e=JSON.parse(JSON.stringify(Object(m["a"])({},this.commandInfo,{param:this.params})));return this.editMode?_.updateCommand(this.editIndex,e):_.addNewCommand(e),this.reset(),{show:!0,color:"success",content:t}}},{key:"cancel",value:function(){return this.reset(),{show:!1}}}]),e}(C["e"]);Object(y["a"])([Object(C["d"])()],et.prototype,"editIndex",void 0),Object(y["a"])([Object(C["f"])("editIndex")],et.prototype,"switchToEditMode",null),Object(y["a"])([Object(C["b"])("on-finish")],et.prototype,"saveNewButton",null),Object(y["a"])([Object(C["b"])("on-finish")],et.prototype,"cancel",null),et=Object(y["a"])([Object(C["a"])({components:Object(m["a"])({},tt)})],et);var at=et,nt=at,it=a("132d"),st=a("a844"),ot=Object(B["a"])(nt,k,O,!1,null,null,null),rt=ot.exports;D()(ot,{VBtn:X["a"],VCard:N["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:M["c"],VDialog:E["a"],VDivider:z["a"],VIcon:it["a"],VSpacer:K["a"],VTextField:Q["a"],VTextarea:st["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("按钮配置")]),a("v-list",t._l(t.commands,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("v-list-item",[a("span",{staticClass:"d-inline-block text-truncate text-no-wrap"},[t._v(t._s(e.title))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.editButton(n)}}},[a("v-icon",[t._v("mdi-pencil-plus")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.buttonRemovePrepare(n)}}},[a("v-icon",{attrs:{color:"error"}},[t._v("mdi-delete")])],1)],1),n!=t.commands.length-1?a("v-divider"):t._e()],1)})),0),0===t.commands.length?a("div",{staticClass:"d-flex justify-center align-center pb-4 text--secondary"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"grey lighten-1"}},[t._v("mdi-emoticon-sad")]),a("div",[t._v("暂无按钮")])],1):t._e(),a("v-dialog",{model:{value:t.removeConfirmVisiable,callback:function(e){t.removeConfirmVisiable=e},expression:"removeConfirmVisiable"}},[a("v-card",[a("v-card-text",{staticClass:"pa-4"},[a("div",{staticClass:"text-center mb-4"},[t._v("确认删除？该按钮的所有配置都将被清空。")]),a("v-btn",{attrs:{color:"error",block:""},on:{click:t.removeButton}},[t._v("确认")])],1)],1)],1),a("v-dialog",{attrs:{eager:"",persistent:""},model:{value:t.editVisiable,callback:function(e){t.editVisiable=e},expression:"editVisiable"}},[a("button-edit",{attrs:{"edit-index":t.editIndex},on:{"on-finish":t.onEditFinish}})],1)],1)},lt=[],dt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.removeConfirmVisiable=!1,t.waitRemoveButtonIndex=0,t.commands=_.get().commands,t.editVisiable=!1,t.editIndex=-1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"buttonRemovePrepare",value:function(t){this.waitRemoveButtonIndex=t,this.removeConfirmVisiable=!0}},{key:"removeButton",value:function(){this.removeConfirmVisiable=!1,_.removeCommand(this.waitRemoveButtonIndex)}},{key:"editButton",value:function(t){this.editVisiable=!0,this.editIndex=t}},{key:"onEditFinish",value:function(){this.editIndex=-1,this.editVisiable=!1}}]),e}(C["e"]);dt=Object(y["a"])([Object(C["a"])({components:{ButtonEdit:rt}})],dt);var ut=dt,vt=ut,mt=a("8860"),pt=Object(B["a"])(vt,ct,lt,!1,null,"dc8a008c",null),bt=pt.exports;D()(pt,{VBtn:X["a"],VCard:N["a"],VCardText:M["b"],VCardTitle:M["c"],VDialog:E["a"],VDivider:z["a"],VIcon:it["a"],VList:mt["a"],VListItem:F["a"],VSpacer:K["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v("设置全局 shard")])]),a("v-card-text",{staticClass:"pt-0"},[a("v-text-field",{attrs:{label:"shard 名称","hide-details":""},model:{value:t.shard,callback:function(e){t.shard=e},expression:"shard"}}),a("div",{staticClass:"mt-5 caption grey--text text--darken-1"},[t._v("用于确定本应用控制台命令发送到的 shard（默认为 shard3）。命令按钮中配置的 shard 值会覆盖该选项。")])],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{depressed:""},on:{click:t.cancel}},[t._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:""},on:{click:t.confirm}},[t._v("确认")])],1)],1)},ft=[],gt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.shard="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"confirm",value:function(){""===this.shard&&(this.shard=w),_.setShard(this.shard),this.finish()}},{key:"finish",value:function(){return{show:!0,content:"已将控制台输入重定向到 ".concat(this.shard),color:"success"}}},{key:"cancel",value:function(){return{show:!1}}},{key:"mounted",value:function(){this.shard=_.get().shard}}]),e}(C["e"]);Object(y["a"])([Object(C["b"])("on-finish")],gt.prototype,"finish",null),Object(y["a"])([Object(C["b"])("on-finish")],gt.prototype,"cancel",null),gt=Object(y["a"])([C["a"]],gt);var yt=gt,Ct=yt,kt=Object(B["a"])(Ct,ht,ft,!1,null,"777a6aac",null),Ot=kt.exports;D()(kt,{VBtn:X["a"],VCard:N["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:M["c"],VDivider:z["a"],VSpacer:K["a"],VTextField:Q["a"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"py-5 text-center"},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(t.introduce))]),a("v-text-field",{attrs:{label:"粘贴至此处","hide-details":"",clearable:""},model:{value:t.newConfig,callback:function(e){t.newConfig=e},expression:"newConfig"}})],1),a("v-card-actions",[t.statsConfirm?a("v-btn",{on:{click:t.cancelLoad}},[t._v("取消")]):t._e(),t.statsConfirm?a("v-spacer"):t._e(),a("v-btn",{attrs:{block:!t.statsConfirm,color:t.btnColor,dark:""},on:{click:t.confirmLoad}},[t._v(t._s(t.btnText))])],1)],1)},wt=[],Vt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.newConfig="",t.statsConfirm=!1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"confirmLoad",value:function(){""!==this.newConfig&&(this.statsConfirm?this.loadConfig():this.statsConfirm=!0)}},{key:"cancelLoad",value:function(){this.statsConfirm=!1}},{key:"loadConfig",value:function(){_.saveOrigin(this.newConfig),this.statsConfirm=!1,this.newConfig="",this.finish()}},{key:"finish",value:function(){return{show:!0,content:"导入成功",color:"success"}}},{key:"introduce",get:function(){return this.statsConfirm?"接下来的操作会覆盖你的现存配置项，是否继续？":"将配置项粘贴到下方并点击”应用“按钮来导入配置项。"}},{key:"btnText",get:function(){return this.statsConfirm?"我了解，确认":"应用"}},{key:"btnColor",get:function(){return this.statsConfirm?"error":"primary"}}]),e}(C["e"]);Object(y["a"])([Object(C["b"])("on-finish")],Vt.prototype,"finish",null),Vt=Object(y["a"])([C["a"]],Vt);var xt=Vt,_t=xt,St=Object(B["a"])(_t,jt,wt,!1,null,null,null),It=St.exports;D()(St,{VBtn:X["a"],VCard:N["a"],VCardActions:M["a"],VCardText:M["b"],VSpacer:K["a"],VTextField:Q["a"]});var Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"text-center"},[a("div",{staticClass:"subtitle-1 pt-5"},[t._v("点击下方按钮导出配置项到剪切板，或直接手动复制。")]),a("v-text-field",{staticClass:"mb-4",attrs:{"hide-details":""},model:{value:t.copyContent,callback:function(e){t.copyContent=e},expression:"copyContent"}}),a("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copyContent,expression:"copyContent",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{block:"",color:"primary",dark:""}},[t._v("导出配置项")])],1)],1)},Tt=[],Lt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.copyContent="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onCopy",value:function(){return{show:!0,content:"已导出到剪切板",color:"success"}}},{key:"onError",value:function(){return{show:!0,content:"异常，可能已经导出完成，请粘贴确认",color:"error"}}},{key:"mounted",value:function(){this.copyContent=_.getOrigin()}}]),e}(C["e"]);Object(y["a"])([Object(C["b"])("on-finish")],Lt.prototype,"onCopy",null),Object(y["a"])([Object(C["b"])("on-finish")],Lt.prototype,"onError",null),Lt=Object(y["a"])([C["a"]],Lt);var Bt=Lt,$t=Bt,Dt=Object(B["a"])($t,Pt,Tt,!1,null,"6bac86d7",null),Nt=Dt.exports;D()(Dt,{VBtn:X["a"],VCard:N["a"],VCardText:M["b"],VTextField:Q["a"]});var Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"pa-2"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("作者")]),a("div",{staticClass:"pt-1"},[a("span",[t._v("本应用由")]),a("a",{on:{click:function(e){return t.openPage(t.homePage)}}},[t._v(" HoPGoldy")]),a("span",[t._v(" 制作并开源。")])])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("数据")]),a("div",{staticClass:"pt-1"},[t._v("本应用所有数据均保存在本地，自动或手动清除浏览器缓存将可能导致数据丢失（确保浏览器已退出无痕模式），请妥善使用导出 / 导入功能。")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("隐私")]),a("div",{staticClass:"pt-1"},[t._v("本应用不会保存您的 Screeps 账号密码，所以在退出应用后您可能需要重新登录。")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("开源")]),a("div",{staticClass:"pt-1"},[a("span",[t._v("本应用代码已开源至 github。点击")]),a("a",{on:{click:function(e){return t.openPage(t.githubUrl)}}},[t._v(" 此处")]),a("span",[t._v(" 来访问本项目源码。")])])],1)],1)],1)],1)},Et=[],Ft=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.githubUrl="https://github.com/HoPGoldy/screeps-commander",t.homePage="https://hopgoldy.github.io/",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"openPage",value:function(t){window.open(t)}}]),e}(C["e"]);Ft=Object(y["a"])([C["a"]],Ft);var At=Ft,Wt=At,Jt=Object(B["a"])(Wt,Mt,Et,!1,null,null,null),qt=Jt.exports;D()(Jt,{VCard:N["a"],VCardText:M["b"],VListItem:F["a"],VListItemContent:A["a"],VListItemTitle:A["c"]});var Gt={ButtonEdit:rt,ButtonConfig:bt,ShardSetter:Ot,LoadConfig:It,SaveConfig:Nt,About:qt},Rt=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.items=[{title:"创建新按钮",comp:"button-edit",icon:"mdi-plus-box-multiple",persistent:!0},{title:"配置按钮",comp:"button-config",icon:"mdi-cursor-default-click",persistent:!1},{title:"设置 shard",comp:"shard-setter",icon:"mdi-server",persistent:!1},{title:"导出配置项",comp:"save-config",icon:"mdi-download-multiple",persistent:!1},{title:"导入配置项",comp:"load-config",icon:"mdi-upload-multiple",persistent:!1},{title:"关于",comp:"about",icon:"mdi-help-box",persistent:!1}],t.showSideDrawer=!1,t.showSidebar=!1,t.sidebarPersistent=!1,t.activeSidebar="save-config",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"onClickSidebar",value:function(t,e){this.showSidebar=!0,this.showSideDrawer=!1,this.activeSidebar=t,this.sidebarPersistent=e}},{key:"onSidebarFinish",value:function(t){this.showSidebar=!1,t.show&&this.$toast(t.content||"设置成功",{color:t.color})}},{key:"mounted",value:function(){}}]),e}(C["e"]);Rt=Object(y["a"])([Object(C["a"])({components:Object(m["a"])({},Gt)})],Rt);var Ht=Rt,Ut=Ht,Xt=(a("7962"),a("7496")),zt=a("40dc"),Kt=a("5bc1"),Qt=a("a75b"),Yt=a("34c3"),Zt=a("f774"),te=a("2a7f"),ee=Object(B["a"])(Ut,u,v,!1,null,"cf17e5b4",null),ae=ee.exports;D()(ee,{VApp:Xt["a"],VAppBar:zt["a"],VAppBarNavIcon:Kt["a"],VContent:Qt["a"],VDialog:E["a"],VDivider:z["a"],VIcon:it["a"],VList:mt["a"],VListItem:F["a"],VListItemContent:A["a"],VListItemIcon:Yt["a"],VListItemSubtitle:A["b"],VListItemTitle:A["c"],VNavigationDrawer:Zt["a"],VToolbarTitle:te["a"]});var ne=a("8c4f"),ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"console-container"},[a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.messageList,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("console-item",{attrs:{content:e.content,icon:e.icon,loading:e.loading},on:{"on-icon-click":t.pasteMessage,"on-item-click":function(a){return t.onItemClick(e)}}})],1)})),0),a("div",{directives:[{name:"intersect",rawName:"v-intersect",value:t.onIntersect,expression:"onIntersect"}],ref:"itemList",staticClass:"fill-block"}),a("v-text-field",{staticClass:"input-box ma-4 mr-8",attrs:{rounded:"",label:"键入命令",solo:"","hide-details":"",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onCommandSend(e)}},model:{value:t.inputCommand,callback:function(e){t.inputCommand=e},expression:"inputCommand"}}),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.inputCommand&&t.inputCommand.length>0,expression:"inputCommand && inputCommand.length > 0"}],staticClass:"fab-btn",attrs:{color:"green",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:t.onCommandSend}},[a("v-icon",[t._v("mdi-arrow-right-thick")])],1)],1),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.inputCommand||t.inputCommand.length<=0,expression:"!inputCommand || inputCommand.length <= 0"}],staticClass:"fab-btn",attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(e){t.commandListVisiable=!0}}},[a("v-icon",[t._v("mdi-code-braces")])],1)],1)],1),a("command-list",{attrs:{show:t.commandListVisiable},on:{"on-close":function(e){t.commandListVisiable=!1},"on-select":t.getCommand}}),a("boot",{attrs:{show:t.bootVisable},on:{"on-finish":t.onLoginSuccess}}),a("login",{attrs:{show:t.loginVisable},on:{"on-success":t.onLoginSuccess}})],1)},se=[],oe=(a("99af"),a("0481"),a("a15b"),a("4069"),a("1276"),a("2909")),re=(a("d3b7"),a("3ca3"),a("ddb0"),a("3835")),ce=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"initScreepsApi",value:function(t){var e=this,a=this.getPlayerInfo(t),n=this.initWebSocket();return Promise.all([a,n]).then((function(t){var a=Object(re["a"])(t,2),n=a[0],i=a[1];return e.playerInfo=n,e.authSessionToken(i,n.sessionToken)})).then((function(t){var a=t.ws,n=t.sessionToken;return console.log("准备就绪！",n,a),e.screepsWebSock=a,e.playerInfo.sessionToken=n,e.subscribeConsole(e.screepsWebSock,e.playerInfo.userId)}))}},{key:"initWebSocket",value:function(){var t=this;return new Promise((function(e,a){var n="wss://screeps.com/socket/".concat(t.getRandStr("number",3),"/").concat(t.getRandStr("string",8),"/websocket");console.log("TCL: ScreepsApi -> screepsUrl",n);var i=new WebSocket(n);i.onopen=function(){return e(i)},i.onerror=function(t){return a(t)}}))}},{key:"getPlayerInfo",value:function(t){return new Promise((function(e,a){l("/api/auth/me",{},{"X-token":t}).then((function(t){200===t.status&&1===t.data.ok?e({username:t.data.username,userId:t.data._id,money:t.data.money,sessionToken:t.config.headers["X-token"]}):a(t.status)}))}))}},{key:"sendConsoleExpression",value:function(t,e){return d("/api/user/console",{expression:t,shard:e},{"X-token":this.playerInfo.sessionToken})}},{key:"authSessionToken",value:function(t,e){return new Promise((function(a,n){t.send('["auth '.concat(e,'"]')),t.onmessage=function(e){if("a"===e.data[0]){var i=JSON.parse(e.data.substring(1))[0];i.includes("auth ok")?a({ws:t,sessionToken:i.split(" ")[2]}):i.includes("auth failed")&&n(e)}}}))}},{key:"subscribeConsole",value:function(t,e){return new Promise((function(a){t.send('["subscribe user:'.concat(e,'/console"]')),console.log("已订阅控制台"),a(t)}))}},{key:"getSessionToken",value:function(t,e){return new Promise((function(a,n){d("/api/auth/signin",{email:t,password:e}).then((function(t){200===t.status&&1===t.data.ok?a(t.data.token):(console.log("123",t),n(t))})).catch((function(t){return n(t)}))}))}},{key:"getRandStr",value:function(t,e){for(var a="number"===t?"0123456789":"abcdefghijklmnopqrstuvwxyz",n="",i=0;i<e;i++)n+=a.charAt(Math.floor(Math.random()*a.length));return n}},{key:"getDataInMessage",value:function(t){return"a"===t[0]||"m"===t[0]?JSON.parse(t.substr(1,t.length)):[""]}},{key:"closeWebSocket",value:function(){this.screepsWebSock&&this.screepsWebSock.close()}}]),e}(C["e"]);ce=Object(y["a"])([C["a"]],ce);var le=ce,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-overlay",{attrs:{value:t.show}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",light:""}},[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v(t._s(t.currentTitle))])]),a("v-window",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("div",{staticClass:"pa-2 pt-0"},t._l(t.introduceContent,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(t._s(e.title))]),a("div",{staticClass:"content"},[t._v(t._s(e.text))])],1)],1)})),1)]),a("v-window-item",{attrs:{value:2}},[a("v-card-text",{staticClass:"pt-0"},[a("v-text-field",{attrs:{label:"Screeps 登陆邮箱","hide-details":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"mt-2",attrs:{label:"Screeps 登陆密码","hide-details":"","append-icon":t.passwordVisiable?"mdi-eye":"mdi-eye-off",type:t.passwordVisiable?"text":"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.next(e)},"click:append":function(e){t.passwordVisiable=!t.passwordVisiable}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"mt-5 caption grey--text text--darken-1"},[t._v("本应用不会记录您的任何身份信息，所以在退出应用后将需要重新登录。")])],1)],1),a("v-window-item",{attrs:{value:3}},[a("div",{staticClass:"pa-2 pt-0 text-center"},[a("v-list-item",[a("v-list-item-content",[a("div",{staticClass:"title mb-4"},[t._v("欢迎回来！")]),a("div",{staticClass:"subtitle-1"},[t._v("现在你可以直接与 Screeps 控制台进行交互，所有控制台输出也会直接反馈到本应用中。")]),a("div",{staticClass:"subtitle-1"},[t._v("同时你也可以自定义快捷命令来快速执行某些常用操作。点击左上角菜单来了解更多操作。")])])],1)],1)])],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{disabled:1===t.step,text:""},on:{click:function(e){t.step--}}},[t._v("上一步")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:"",loading:t.confirmBtnLoading},on:{click:t.next}},[t._v("确认")])],1)],1)],1)},ue=[],ve=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.introduceContent=[{title:"数据",text:"本应用所有数据均保存在本地，自动或手动清除浏览器缓存将可能导致数据丢失（确保浏览器已退出无痕模式），请妥善使用导出 / 导入功能。"},{title:"网络",text:"本应用不会优化与 Screeps 的连接质量，在网络不好时可能会出现命令丢失等问题。"},{title:"开源",text:"本应用代码已开源至 github。更多信息请访问”关于“页。"}],t.step=1,t.passwordVisiable=!1,t.email="",t.password="",t.sessionToken="",t.confirmBtnLoading=!1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"finishBoot",value:function(){return _.init(),this.sessionToken}},{key:"next",value:function(){2===this.step?this.login():3===this.step?this.finishBoot():this.step++}},{key:"login",value:function(){var t=this;""===this.email||""===this.password||this.confirmBtnLoading||(this.confirmBtnLoading=!0,this.$toast.info("正在向 Screeps 服务器验证身份..."),this.getSessionToken(this.email,this.password).then((function(e){t.sessionToken=e,t.step++,t.$toast.success("验证成功"),t.confirmBtnLoading=!1})).catch((function(){t.confirmBtnLoading=!1,t.$toast.error("验证失败，请验证用户名密码是否正确")})))}},{key:"currentTitle",get:function(){switch(this.step){case 1:return"使用须知";case 2:return"账户确认";case 3:return"";default:return"初始化"}}}]),e}(Object(C["c"])(le));Object(y["a"])([Object(C["d"])()],ve.prototype,"show",void 0),Object(y["a"])([Object(C["b"])("on-finish")],ve.prototype,"finishBoot",null),ve=Object(y["a"])([C["a"]],ve);var me=ve,pe=me,be=(a("bb25"),a("a797")),he=a("f665"),fe=a("1e6c"),ge=Object(B["a"])(pe,de,ue,!1,null,"8a8b59ee",null),ye=ge.exports;D()(ge,{VBtn:X["a"],VCard:N["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:M["c"],VDivider:z["a"],VListItem:F["a"],VListItemContent:A["a"],VListItemTitle:A["c"],VOverlay:be["a"],VSpacer:K["a"],VTextField:Q["a"],VWindow:he["a"],VWindowItem:fe["a"]});var Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-overlay",{attrs:{value:t.show}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",light:""}},[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("身份认证")]),a("v-card-text",{staticClass:"px-2 pb-2"},[a("v-text-field",{staticClass:"ma-2",attrs:{label:"Screeps 登陆邮箱","hide-details":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"ma-2",attrs:{label:"Screeps 登陆密码","hide-details":"","append-icon":t.passwordVisiable?"mdi-eye":"mdi-eye-off",type:t.passwordVisiable?"text":"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},"click:append":function(e){t.passwordVisiable=!t.passwordVisiable}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"ma-2 caption grey--text text--darken-1"},[t._v("本应用不会记录您的任何身份信息，所以在退出应用后将需要重新登录。")]),a("v-btn",{attrs:{color:"primary",block:"",depressed:"",loading:t.loading},on:{click:t.login}},[t._v("登陆")])],1)],1)],1)},ke=[],Oe=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.passwordVisiable=!1,t.email="",t.password="",t.loading=!1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"login",value:function(){var t=this;""===this.email||""===this.password||this.loading||(this.loading=!0,this.$toast.info("正在向 Screeps 服务器验证身份..."),this.getSessionToken(this.email,this.password).then((function(e){t.loginSuccess(e)})).catch((function(){t.loading=!1,t.$toast.error("验证失败，请验证用户名密码是否正确")})))}},{key:"loginSuccess",value:function(t){return t}}]),e}(Object(C["c"])(le));Object(y["a"])([Object(C["d"])()],Oe.prototype,"show",void 0),Object(y["a"])([Object(C["b"])("on-success")],Oe.prototype,"loginSuccess",null),Oe=Object(y["a"])([C["a"]],Oe);var je=Oe,we=je,Ve=(a("1c12"),Object(B["a"])(we,Ce,ke,!1,null,"24517e46",null)),xe=Ve.exports;D()(Ve,{VBtn:X["a"],VCard:N["a"],VCardText:M["b"],VCardTitle:M["c"],VOverlay:be["a"],VTextField:Q["a"]});var _e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"console-item-contaienr"},[a("v-list-item",{attrs:{ripple:!1}},[a("v-list-item-icon",{staticClass:"my-3 mr-4"},[a("v-btn",{attrs:{icon:"",small:"",loading:t.loading},on:{click:t.copyContent}},[a("v-icon",{attrs:{color:t.iconColor}},[t._v(t._s(t.icon))])],1)],1),a("v-list-item-content",{on:{click:t.onContentClick}},[a("div",{ref:"content",staticClass:"body-2"},t._l(t.content,(function(t){return a("div",{staticClass:"my-2"})})),0)])],1),a("v-divider")],1)},Se=[],Ie=function(t){function e(){return Object(p["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"refrashContent",value:function(t){for(var e=this.$refs.content,a=0;a<e.children.length;a++)e.children[a].innerHTML=t[a]}},{key:"onContentClick",value:function(){}},{key:"copyContent",value:function(){return this.content}},{key:"mounted",value:function(){this.refrashContent(this.content)}},{key:"iconColor",get:function(){return"mdi-arrow-bottom-right-thick"===this.icon?"amber":"mdi-arrow-top-left-thick"===this.icon?"light-blue":"mdi-alert-circle"===this.icon?"error":"light-green"}}]),e}(C["e"]);Object(y["a"])([Object(C["d"])({required:!0})],Ie.prototype,"content",void 0),Object(y["a"])([Object(C["d"])({required:!0})],Ie.prototype,"icon",void 0),Object(y["a"])([Object(C["d"])({default:!0})],Ie.prototype,"loading",void 0),Object(y["a"])([Object(C["f"])("content")],Ie.prototype,"refrashContent",null),Object(y["a"])([Object(C["b"])("on-item-click")],Ie.prototype,"onContentClick",null),Object(y["a"])([Object(C["b"])("on-icon-click")],Ie.prototype,"copyContent",null),Ie=Object(y["a"])([C["a"]],Ie);var Pe=Ie,Te=Pe,Le=Object(B["a"])(Te,_e,Se,!1,null,null,null),Be=Le.exports;D()(Le,{VBtn:X["a"],VDivider:z["a"],VIcon:it["a"],VListItem:F["a"],VListItemContent:A["a"],VListItemIcon:Yt["a"]});var $e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-sheet",{on:{"click:outside":t.close},model:{value:t.sheetVisiable,callback:function(e){t.sheetVisiable=e},expression:"sheetVisiable"}},[a("v-list",t._l(t.commandListData,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("v-list-item",{on:{click:function(a){return t.onCommandClick(e)}}},[a("v-chip",{staticClass:"mr-3",attrs:{small:"",disabled:""}},[t._v(t._s(e.shard||"全局"))]),a("span",{staticClass:"d-inline-block text-truncate text-no-wrap"},[t._v(t._s(e.title))])],1),n!=t.commandListData.length-1?a("v-divider"):t._e()],1)})),0),a("parameter-collecter",{attrs:{show:t.parameterCollecterVisiable},on:{"on-close":t.onParamClose,"on-finish":t.onParamFinish},model:{value:t.collectingParam,callback:function(e){t.collectingParam=e},expression:"collectingParam"}})],1)},De=[],Ne=(a("4d63"),a("25f0"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("请填写参数")]),t._l(t.paramInputs,(function(e,n){return a("div",{key:n,staticClass:"mx-2 px-2"},[a("v-text-field",{staticClass:"mb-4",attrs:{label:e.label,"hide-details":"",clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1)})),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{width:"100"},on:{click:t.close}},[t._v("放弃")]),a("v-spacer"),a("v-btn",{attrs:{width:"100",color:"primary",depressed:""},on:{click:t.returnParam}},[t._v("确认")])],1)],2)],1)}),Me=[],Ee=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.show=!1,t.paramInputs=[],t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"loadDefaultValue",value:function(t){t&&(this.paramInputs=this.value.map((function(t){return Object(m["a"])({},t,{value:t.default})})))}},{key:"close",value:function(){}},{key:"returnParam",value:function(){return this.paramInputs.map((function(t){return{match:t.match,value:t.value}}))}}]),e}(C["e"]);Object(y["a"])([Object(C["d"])({required:!0,default:[]})],Ee.prototype,"value",void 0),Object(y["a"])([Object(C["d"])({required:!0})],Ee.prototype,"show",void 0),Object(y["a"])([Object(C["f"])("show")],Ee.prototype,"loadDefaultValue",null),Object(y["a"])([Object(C["b"])("on-close")],Ee.prototype,"close",null),Object(y["a"])([Object(C["b"])("on-finish")],Ee.prototype,"returnParam",null),Ee=Object(y["a"])([C["a"]],Ee);var Fe=Ee,Ae=Fe,We=Object(B["a"])(Ae,Ne,Me,!1,null,"68dc2feb",null),Je=We.exports;D()(We,{VBtn:X["a"],VCard:N["a"],VCardActions:M["a"],VCardTitle:M["c"],VDialog:E["a"],VDivider:z["a"],VSpacer:K["a"],VTextField:Q["a"]});var qe=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.sheetVisiable=!1,t.commandListData=[],t.parameterCollecterVisiable=!1,t.collectingParam=[],t.selectCommand="",t.selectShard="",t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"updateData",value:function(t){this.sheetVisiable=t,t&&(this.commandListData=_.get().commands)}},{key:"onCommandClick",value:function(t){this.selectCommand=t.body,this.selectShard=t.shard,t.param.length>0?(this.collectingParam=t.param,this.parameterCollecterVisiable=!0):this.sendCommand(t.body)}},{key:"sendCommand",value:function(t){return this.selectShard||(this.selectShard=_.get().shard),{command:t,shard:this.selectShard}}},{key:"close",value:function(){}},{key:"onParamClose",value:function(){this.parameterCollecterVisiable=!1}},{key:"onParamFinish",value:function(t){this.parameterCollecterVisiable=!1;var e=this.buildCommand(this.selectCommand,t);this.sendCommand(e)}},{key:"buildCommand",value:function(t,e){var a=t;return e.map((function(t){a=a.replace(new RegExp("\\".concat(t.match),"g"),t.value)})),a}}]),e}(C["e"]);Object(y["a"])([Object(C["d"])({required:!0,default:!1})],qe.prototype,"show",void 0),Object(y["a"])([Object(C["f"])("show")],qe.prototype,"updateData",null),Object(y["a"])([Object(C["b"])("on-select")],qe.prototype,"sendCommand",null),Object(y["a"])([Object(C["b"])("on-close")],qe.prototype,"close",null),qe=Object(y["a"])([Object(C["a"])({components:{ParameterCollecter:Je}})],qe);var Ge=qe,Re=Ge,He=a("288c"),Ue=a("cc20"),Xe=Object(B["a"])(Re,$e,De,!1,null,"750f4b29",null),ze=Xe.exports;D()(Xe,{VBottomSheet:He["a"],VChip:Ue["a"],VDivider:z["a"],VList:mt["a"],VListItem:F["a"]});var Ke=function(t){function e(){var t;return Object(p["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.messageList=[],t.commandListVisiable=!1,t.inputCommand="",t.bootVisable=!1,t.loginVisable=!1,t.fillBlockVisiable=!1,t}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"pasteMessage",value:function(t){this.inputCommand=t.join("\n")}},{key:"onCommandSend",value:function(){this.sendCommand(this.inputCommand,_.get().shard),this.inputCommand=""}},{key:"sendCommand",value:function(t,e){var a=this;if(t&&!(t.length<=0)){var n=this.addNewMessage([t],"mdi-arrow-top-left-thick",!0,e);this.sendConsoleExpression(t,e).then((function(t){console.log("命令发送完成",t),n.loading=!1,t.data.error&&(n.icon="mdi-alert-circle",a.addNewMessage(["发送失败: "+t.data.error],"mdi-alert-circle",!1,e))})).catch((function(t){n.loading=!1,n.icon="mdi-alert-circle",a.addNewMessage(["啊哦，命令发送失败，请尝试刷新网页并重写登陆",t],"mdi-alert-circle",!1,e)})),this.scrollToBottom()}}},{key:"onIntersect",value:function(t){this.fillBlockVisiable=t[0].isIntersecting}},{key:"scrollToBottom",value:function(){this.$vuetify.goTo(this.$refs.itemList,{duration:1e3})}},{key:"getCommand",value:function(t){this.commandListVisiable=!1,this.sendCommand(t.command,t.shard)}},{key:"onMessage",value:function(t){if("a"===t.data[0])try{var e=JSON.parse(t.data.substring(1))[0],a=JSON.parse(e)[1],n=[];if(a.error)this.addNewMessage(a.error.split("\n"),"mdi-alert-circle",!1,a.shard);else{if(a.messages.log.length>0&&n.push.apply(n,Object(oe["a"])(a.messages.log.map((function(t){return t.split("\n")})).flat())),a.messages.results.length>0&&n.push.apply(n,Object(oe["a"])(a.messages.results[0].split("\n"))),n.length<=0)return;this.addNewMessage(n,"mdi-arrow-bottom-right-thick",!1,a.shard)}this.fillBlockVisiable&&this.scrollToBottom()}catch(i){console.log("onMessage 数据解析出错",i,t)}}},{key:"addNewMessage",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=new Date,s={content:t,icon:e,loading:a,shard:n,date:"".concat(i.getHours(),":").concat(i.getMinutes(),":").concat(i.getSeconds())};return this.messageList.push(s),s}},{key:"onLoginSuccess",value:function(t){var e=this;this.bootVisable=!1,this.loginVisable=!1,this.addNewMessage(["登录成功"],"mdi-key",!1);var a=this.addNewMessage(["正在订阅 Screeps WebSocket, 请稍后..."],"mdi-wifi");this.initScreepsApi(t).then((function(t){t.onmessage=e.onMessage,a.loading=!1,a.content=["Screeps WebSocket 订阅成功!"],e.addNewMessage(["您现在可以正常与控制台进行交互"],"mdi-wifi",!1)}))}},{key:"onItemClick",value:function(t){var e=t.shard?"所处镜面 ".concat(t.shard," | "):"";this.$toast.info("".concat(e,"消息时间 ").concat(t.date),{y:"top"})}},{key:"mounted",value:function(){_.exist?(_.init(),this.loginVisable=!0):this.bootVisable=!0}},{key:"destroyed",value:function(){this.closeWebSocket()}}]),e}(Object(C["c"])(le));Ke=Object(y["a"])([Object(C["a"])({components:{ConsoleItem:Be,CommandList:ze,Boot:ye,Login:xe}})],Ke);var Qe=Ke,Ye=Qe,Ze=(a("d4cf"),a("0789")),ta=a("1baa"),ea=a("269a"),aa=a.n(ea),na=a("90a2"),ia=Object(B["a"])(Ye,ie,se,!1,null,"17d4cac2",null),sa=ia.exports;D()(ia,{VBtn:X["a"],VFabTransition:Ze["c"],VIcon:it["a"],VList:mt["a"],VListItemGroup:ta["a"],VTextField:Q["a"]}),aa()(ia,{Intersect:na["a"]}),n["a"].use(ne["a"]);var oa=[{path:"/",redirect:"/console"},{path:"/console",component:sa}],ra=new ne["a"]({routes:oa}),ca=(a("5363"),a("f309")),la=a("2db4"),da=a("87f6"),ua=a.n(da);n["a"].use(ca["a"],{components:{VSnackbar:la["a"],VBtn:X["a"],VIcon:it["a"]}}),n["a"].use(ua.a,{x:"center",showClose:!0,closeIcon:"mdi-close",closeColor:"white"});var va=new ca["a"]({}),ma=a("4eb5"),pa=a.n(ma);pa.a.config.autoSetContainer=!0,n["a"].use(pa.a),n["a"].config.productionTip=!1,new n["a"]({router:ra,vuetify:va,render:function(t){return t(ae)}}).$mount("#app")},d4cf:function(t,e,a){"use strict";var n=a("cb55"),i=a.n(n);i.a},f035:function(t,e,a){"use strict";var n=a("143e"),i=a.n(n);i.a}});
//# sourceMappingURL=app.03b4524c.js.map