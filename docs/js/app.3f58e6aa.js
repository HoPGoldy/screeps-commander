(function(t){function e(e){for(var n,o,c=e[0],r=e[1],l=e[2],d=0,v=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&v.push(s[o][0]),s[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var r=a[c];0!==s[r]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"1dac":function(t,e,a){"use strict";var n=a("3edb"),s=a.n(n);s.a},"217a":function(t,e,a){},2748:function(t,e,a){"use strict";var n=a("6688"),s=a.n(n);s.a},"2c3b":function(t,e,a){},"3db9":function(t,e,a){"use strict";var n=a("5f52"),s=a.n(n);s.a},"3edb":function(t,e,a){},"5f52":function(t,e,a){},6688:function(t,e,a){},"69ed":function(t,e,a){"use strict";var n=a("217a"),s=a.n(n);s.a},7119:function(t,e,a){"use strict";var n=a("8247"),s=a.n(n);s.a},8247:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("bc3a"),i=a.n(s),o=a("4328"),c=a.n(o),r={screeps:"https://cors-anywhere.herokuapp.com/https://screeps.com"};i.a.interceptors.request.use((function(t){return t}));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"screeps",s=/http/.test(t)?t:r[n]+t;return i()({url:s,params:e,method:"get",headers:a})},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"screeps";e=c.a.stringify(e);var s=/http/.test(t)?t:r[n]+t;return i()({url:s,data:e,method:"post",headers:a})},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("div",[a("v-app-bar",{attrs:{color:"blue accent-3",dark:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.showSideDrawer=!t.showSideDrawer}}}),a("v-toolbar-title",[t._v("Screeps Commander")])],1)],1),a("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.showSideDrawer,callback:function(e){t.showSideDrawer=e},expression:"showSideDrawer"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v("Screeps Commander")]),a("v-list-item-subtitle",[t._v("@hopgoldy")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},t._l(t.items,(function(e){return a("v-list-item",{key:e.title,attrs:{link:""},on:{click:function(a){return t.onClickSidebar(e.comp,e.persistent)}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1),a("v-content",{attrs:{app:""}},[a("router-view")],1),a("v-dialog",{attrs:{eager:"",persistent:t.sidebarPersistent},model:{value:t.showSidebar,callback:function(e){t.showSidebar=e},expression:"showSidebar"}},[a(t.activeSidebar,{tag:"component",on:{"on-finish":t.onSidebarFinish}})],1),a("v-snackbar",{attrs:{color:t.messageColor},model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:"showMessage"}},[t._v(t._s(t.messageText)),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showMessage=!1}}},[t._v("关闭")])],1)],1)},v=[],m=a("5530"),b=a("d4ec"),p=a("bee2"),h=a("99de"),f=a("7e84"),g=a("262e"),C=a("9ab4"),y=a("60a3"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v(t._s(t.editMode?"编辑按钮":"添加新按钮"))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showHelp=!0}}},[a("v-icon",[t._v("mdi-help-circle-outline")])],1)],1),a("v-card-text",[a("v-text-field",{staticClass:"mb-4",attrs:{label:"名称","hide-details":"",clearable:""},model:{value:t.commandInfo.title,callback:function(e){t.$set(t.commandInfo,"title",e)},expression:"commandInfo.title"}}),a("v-text-field",{staticClass:"mb-4",attrs:{label:"目标 shard","hide-details":"",clearable:""},model:{value:t.commandInfo.shard,callback:function(e){t.$set(t.commandInfo,"shard",e)},expression:"commandInfo.shard"}}),a("v-textarea",{staticClass:"mb-4",attrs:{label:"命令","hide-details":"","auto-grow":"",clearable:"",rows:"1"},model:{value:t.commandInfo.body,callback:function(e){t.$set(t.commandInfo,"body",e)},expression:"commandInfo.body"}}),a("div",{staticClass:"mt-5"},[t._l(t.params,(function(e,n){return[a("div",{staticClass:"mb-2 d-flex justify-space-between"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"error",small:"",icon:""},on:{click:function(e){return t.removeParam(n)}}},[a("v-icon",[t._v("mdi-close-circle")])],1),a("v-btn",{staticClass:"flex-grow-1",attrs:{small:""},on:{click:function(e){return t.editParam(n)}}},[a("span",{staticClass:"d-inline-block text-truncate text-no-wrap"},[t._v(t._s(e.label))]),a("v-spacer"),a("span",[t._v(t._s(e.match))])],1)],1)]})),a("v-btn",{attrs:{block:"",small:""},on:{click:t.addNewParam}},[t._v("添加参数")])],2)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{depressed:"",width:"100"},on:{click:function(e){t.showCancelConfirm=!0}}},[t._v(t._s(t.editMode?"返回":"放弃"))]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",width:"100",depressed:""},on:{click:t.saveNewButton}},[t._v(t._s(t.editMode?"保存":"创建"))])],1),a("v-dialog",{model:{value:t.showCancelConfirm,callback:function(e){t.showCancelConfirm=e},expression:"showCancelConfirm"}},[a("v-card",[a("v-card-text",{staticClass:"pa-4"},[a("div",{staticClass:"text-center mb-4"},[t._v("确认放弃编辑？"+t._s(t.editMode?"新修改的内容不会被保存":"该按钮的所有配置都将被清空。"))]),a("v-btn",{attrs:{color:"error",block:""},on:{click:t.cancel}},[t._v("确认")])],1)],1)],1),a("button-help",{attrs:{show:t.showHelp},on:{"on-close":function(e){t.showHelp=!1}}}),a("param-config",{attrs:{show:t.showParamConfig},on:{"on-cancel":function(e){t.showParamConfig=!1},"on-confirm":t.updateParam},model:{value:t.editParamData,callback:function(e){t.editParamData=e},expression:"editParamData"}})],1)},O=[],j=(a("caad"),a("d81d"),a("a434"),a("ac1f"),a("2532"),a("466d"),"screepsCommandStorage"),w="shard3",x=function(t){function e(){return Object(b["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"init",value:function(){var t=localStorage.getItem(j);t?this.dataBase=JSON.parse(t):(this.dataBase={shard:w,commands:[]},this.save())}},{key:"get",value:function(){return this.dataBase}},{key:"getOrigin",value:function(){var t=localStorage.getItem(j);return"string"===typeof t?t:""}},{key:"saveOrigin",value:function(t){localStorage.setItem(j,t),this.init()}},{key:"addNewCommand",value:function(t){this.dataBase.commands.push(t),this.save()}},{key:"updateCommand",value:function(t,e){t>=this.dataBase.commands.length||(this.dataBase.commands[t]=e,this.save())}},{key:"removeCommand",value:function(t){this.dataBase.commands.splice(t,1),this.save()}},{key:"setShard",value:function(t){this.dataBase.shard=t,this.save()}},{key:"save",value:function(){localStorage.setItem(j,JSON.stringify(this.dataBase))}},{key:"exist",get:function(){var t=localStorage.getItem(j);return"string"===typeof t}}]),e}(y["e"]);x=Object(C["a"])([y["a"]],x);var V=new x,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{on:{"click:outside":t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-text",{staticClass:"pa-2"},t._l(t.info,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(t._s(e.title))]),a("div",{staticClass:"pt-1 lh"},[t._v(t._s(e.content))]),e.code?a("code",{staticClass:"mt-2 pa-1"},[t._v(t._s(e.code))]):t._e()],1)],1)})),1)],1)],1)},S=[],I=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.info=[{title:"命令",content:"命令是点击该按钮时发送到 screeps 的代码主体。支持任何可以在游戏控制台中执行的表达式。如下：",code:"Object.key(Game.creeps).length"},{title:"参数",content:"为了提高功能性，你可以通过新建多个参数来实现诸如 ”从某房发送某资源到某房“ 的操作。参数会在点击按钮时通过弹出框进行收集。"},{title:"占位符",content:"占位符代表着参数将要插入到的命令位置，参数在新建时会自动分配以 $ 开头的占位符。如果在命令中没有找到对应的占位符，该参数将被抛弃。占位符允许在命令中出现多次。",code:"Game.rooms.$1.controller.level"}],t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"onClose",value:function(){}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0})],I.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-close")],I.prototype,"onClose",null),I=Object(C["a"])([y["a"]],I);var T=I,P=T,L=(a("3db9"),a("2877")),B=a("6544"),M=a.n(B),D=a("b0af"),$=a("99d9"),E=a("169a"),N=a("da13"),F=a("5d23"),A=Object(L["a"])(P,_,S,!1,null,"694f7ab2",null),W=A.exports;M()(A,{VCard:D["a"],VCardText:$["b"],VDialog:E["a"],VListItem:N["a"],VListItemContent:F["a"],VListItemTitle:F["c"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("参数配置")]),a("v-card-text",[a("v-text-field",{attrs:{label:"占位符","hide-details":"",disabled:""},model:{value:t.value.match,callback:function(e){t.$set(t.value,"match",e)},expression:"value.match"}}),a("v-text-field",{staticClass:"mt-4",attrs:{rules:t.rules,counter:t.inputLimit,label:"标签",clearable:""},model:{value:t.value.label,callback:function(e){t.$set(t.value,"label",e)},expression:"value.label"}}),a("v-text-field",{attrs:{label:"默认值","hide-details":"",clearable:""},model:{value:t.value.default,callback:function(e){t.$set(t.value,"default",e)},expression:"value.default"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{on:{click:t.cancel}},[t._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.confirm}},[t._v("确定")])],1)],1)],1)},J=[],R=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.inputLimit=20,t.rules=[function(e){return!e||e.length<=t.inputLimit||"超过字数限制"}],t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"confirm",value:function(){return""===this.value.label&&(this.value.label="未命名参数"),this.value.label.length>this.inputLimit&&(this.value.label=this.value.label.substring(0,this.inputLimit)),this.value}},{key:"cancel",value:function(){}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0,default:{match:"",default:"",label:""}})],R.prototype,"value",void 0),Object(C["a"])([Object(y["d"])({required:!0})],R.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-confirm")],R.prototype,"confirm",null),Object(C["a"])([Object(y["b"])("on-cancel")],R.prototype,"cancel",null),R=Object(C["a"])([y["a"]],R);var H=R,G=H,U=a("8336"),X=a("ce7e"),z=a("2fa4"),K=a("8654"),Q=Object(L["a"])(G,q,J,!1,null,null,null),Y=Q.exports;M()(Q,{VBtn:U["a"],VCard:D["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:E["a"],VDivider:X["a"],VSpacer:z["a"],VTextField:K["a"]});var Z={ButtonHelp:W,ParamConfig:Y},tt=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.editMode=!1,t.params=[],t.showCancelConfirm=!1,t.showHelp=!1,t.showParamConfig=!1,t.editParamIndex=0,t.editParamData={label:"",default:"",match:""},t.commandInfo={title:"新按钮",shard:w,body:"Game.time"},t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"switchToEditMode",value:function(t){if(!(this.editIndex<0)){this.editMode=!0;var e=JSON.parse(JSON.stringify(V.get().commands[t]));this.params=e.param,this.commandInfo=e}}},{key:"addNewParam",value:function(){var t=this.params.length,e=this.params.map((function(t){return t.match}));while(e.includes("$".concat(t)))t+=1;this.params.push({label:"参数".concat(t),default:"",match:"$".concat(t)})}},{key:"removeParam",value:function(t){this.params.splice(t,1)}},{key:"editParam",value:function(t){this.editParamIndex=t,this.editParamData=this.params[t],this.showParamConfig=!0}},{key:"updateParam",value:function(t){this.showParamConfig=!1,this.params[this.editParamIndex]=t}},{key:"saveNewButton",value:function(){var t=this.editMode?"保存成功":"添加成功，点击右下角按钮查看";return this.editMode?V.updateCommand(this.editIndex,Object(m["a"])({},this.commandInfo,{param:this.params})):V.addNewCommand(Object(m["a"])({},this.commandInfo,{param:this.params})),{show:!0,color:"success",content:t}}},{key:"cancel",value:function(){return{show:!1}}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])()],tt.prototype,"editIndex",void 0),Object(C["a"])([Object(y["f"])("editIndex")],tt.prototype,"switchToEditMode",null),Object(C["a"])([Object(y["b"])("on-finish")],tt.prototype,"saveNewButton",null),Object(C["a"])([Object(y["b"])("on-finish")],tt.prototype,"cancel",null),tt=Object(C["a"])([Object(y["a"])({components:Object(m["a"])({},Z)})],tt);var et=tt,at=et,nt=a("132d"),st=a("a844"),it=Object(L["a"])(at,k,O,!1,null,null,null),ot=it.exports;M()(it,{VBtn:U["a"],VCard:D["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:E["a"],VDivider:X["a"],VIcon:nt["a"],VSpacer:z["a"],VTextField:K["a"],VTextarea:st["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("按钮配置")]),a("v-list",t._l(t.commands,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("v-list-item",[a("span",{staticClass:"d-inline-block text-truncate text-no-wrap"},[t._v(t._s(e.title))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.editButton(n)}}},[a("v-icon",[t._v("mdi-pencil-plus")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.buttonRemovePrepare(n)}}},[a("v-icon",{attrs:{color:"error"}},[t._v("mdi-delete")])],1)],1),n!=t.commands.length-1?a("v-divider"):t._e()],1)})),0),0===t.commands.length?a("div",{staticClass:"d-flex justify-center align-center pb-4 text--secondary"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"grey lighten-1"}},[t._v("mdi-emoticon-sad")]),a("div",[t._v("暂无按钮")])],1):t._e(),a("v-dialog",{model:{value:t.removeConfirmVisiable,callback:function(e){t.removeConfirmVisiable=e},expression:"removeConfirmVisiable"}},[a("v-card",[a("v-card-text",{staticClass:"pa-4"},[a("div",{staticClass:"text-center mb-4"},[t._v("确认删除？该按钮的所有配置都将被清空。")]),a("v-btn",{attrs:{color:"error",block:""},on:{click:t.removeButton}},[t._v("确认")])],1)],1)],1),a("v-dialog",{attrs:{eager:"",persistent:""},model:{value:t.editVisiable,callback:function(e){t.editVisiable=e},expression:"editVisiable"}},[a("button-edit",{attrs:{"edit-index":t.editIndex},on:{"on-finish":t.onEditFinish}})],1)],1)},rt=[],lt=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.removeConfirmVisiable=!1,t.waitRemoveButtonIndex=0,t.commands=V.get().commands,t.editVisiable=!1,t.editIndex=-1,t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"buttonRemovePrepare",value:function(t){this.waitRemoveButtonIndex=t,this.removeConfirmVisiable=!0}},{key:"removeButton",value:function(){this.removeConfirmVisiable=!1,V.removeCommand(this.waitRemoveButtonIndex)}},{key:"editButton",value:function(t){this.editVisiable=!0,this.editIndex=t}},{key:"onEditFinish",value:function(){this.editIndex=-1,this.editVisiable=!1}}]),e}(y["e"]);lt=Object(C["a"])([Object(y["a"])({components:{ButtonEdit:ot}})],lt);var ut=lt,dt=ut,vt=a("8860"),mt=Object(L["a"])(dt,ct,rt,!1,null,"57d0477f",null),bt=mt.exports;M()(mt,{VBtn:U["a"],VCard:D["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:E["a"],VDivider:X["a"],VIcon:nt["a"],VList:vt["a"],VListItem:N["a"],VSpacer:z["a"]});var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v("设置默认 shard")])]),a("v-card-text",{staticClass:"pt-0"},[a("v-text-field",{attrs:{label:"shard 名称","hide-details":""},model:{value:t.shard,callback:function(e){t.shard=e},expression:"shard"}}),a("div",{staticClass:"mt-5 caption grey--text text--darken-1"},[t._v("用于确定本应用控制台命令发送到的 shard（默认为 shard3）。命令按钮中配置的 shard 值会覆盖该选项。")])],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{depressed:""},on:{click:t.cancel}},[t._v("取消")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:""},on:{click:t.confirm}},[t._v("确认")])],1)],1)},ht=[],ft=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.shard="",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"confirm",value:function(){""===this.shard&&(this.shard=w),V.setShard(this.shard),this.finish()}},{key:"finish",value:function(){return{show:!0,content:"已将控制台输出重定向到 ".concat(this.shard),color:"success"}}},{key:"cancel",value:function(){return{show:!1}}},{key:"mounted",value:function(){this.shard=V.get().shard}}]),e}(y["e"]);Object(C["a"])([Object(y["b"])("on-finish")],ft.prototype,"finish",null),Object(C["a"])([Object(y["b"])("on-finish")],ft.prototype,"cancel",null),ft=Object(C["a"])([y["a"]],ft);var gt=ft,Ct=gt,yt=Object(L["a"])(Ct,pt,ht,!1,null,"5801bb0d",null),kt=yt.exports;M()(yt,{VBtn:U["a"],VCard:D["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDivider:X["a"],VSpacer:z["a"],VTextField:K["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"py-5 text-center"},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(t.introduce))]),a("v-text-field",{attrs:{label:"粘贴至此处","hide-details":"",clearable:""},model:{value:t.newConfig,callback:function(e){t.newConfig=e},expression:"newConfig"}})],1),a("v-card-actions",[t.statsConfirm?a("v-btn",{on:{click:t.cancelLoad}},[t._v("取消")]):t._e(),t.statsConfirm?a("v-spacer"):t._e(),a("v-btn",{attrs:{block:!t.statsConfirm,color:t.btnColor,dark:""},on:{click:t.confirmLoad}},[t._v(t._s(t.btnText))])],1)],1)},jt=[],wt=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.newConfig="",t.statsConfirm=!1,t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"confirmLoad",value:function(){""!==this.newConfig&&(this.statsConfirm?this.loadConfig():this.statsConfirm=!0)}},{key:"cancelLoad",value:function(){this.statsConfirm=!1}},{key:"loadConfig",value:function(){V.saveOrigin(this.newConfig),this.statsConfirm=!1,this.newConfig="",this.finish()}},{key:"finish",value:function(){return{show:!0,content:"导入成功",color:"success"}}},{key:"introduce",get:function(){return this.statsConfirm?"接下来的操作会覆盖你的现存配置项，是否继续？":"将配置项粘贴到下方并点击”应用“按钮来导入配置项。"}},{key:"btnText",get:function(){return this.statsConfirm?"我了解，确认":"应用"}},{key:"btnColor",get:function(){return this.statsConfirm?"error":"primary"}}]),e}(y["e"]);Object(C["a"])([Object(y["b"])("on-finish")],wt.prototype,"finish",null),wt=Object(C["a"])([y["a"]],wt);var xt=wt,Vt=xt,_t=Object(L["a"])(Vt,Ot,jt,!1,null,null,null),St=_t.exports;M()(_t,{VBtn:U["a"],VCard:D["a"],VCardActions:$["a"],VCardText:$["b"],VSpacer:z["a"],VTextField:K["a"]});var It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"text-center"},[a("div",{staticClass:"subtitle-1 pt-5"},[t._v("点击下方按钮导出配置项到剪切板，或直接手动复制。")]),a("v-text-field",{staticClass:"mb-4",attrs:{"hide-details":""},model:{value:t.copyContent,callback:function(e){t.copyContent=e},expression:"copyContent"}}),a("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copyContent,expression:"copyContent",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{block:"",color:"primary",dark:""}},[t._v("导出配置项")])],1)],1)},Tt=[],Pt=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.copyContent="",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"onCopy",value:function(){return{show:!0,content:"已导出到剪切板",color:"success"}}},{key:"onError",value:function(){return{show:!0,content:"异常，可能已经导出完成，请粘贴确认",color:"error"}}},{key:"mounted",value:function(){this.copyContent=V.getOrigin()}}]),e}(y["e"]);Object(C["a"])([Object(y["b"])("on-finish")],Pt.prototype,"onCopy",null),Object(C["a"])([Object(y["b"])("on-finish")],Pt.prototype,"onError",null),Pt=Object(C["a"])([y["a"]],Pt);var Lt=Pt,Bt=Lt,Mt=Object(L["a"])(Bt,It,Tt,!1,null,"c4148616",null),Dt=Mt.exports;M()(Mt,{VBtn:U["a"],VCard:D["a"],VCardText:$["b"],VTextField:K["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",{staticClass:"pa-2"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("作者")]),a("div",{staticClass:"pt-1"},[a("span",[t._v("本应用由")]),a("a",{on:{click:function(e){return t.openPage(t.homePage)}}},[t._v(" HoPGoldy")]),a("span",[t._v(" 制作并开源。")])])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("数据")]),a("div",{staticClass:"pt-1"},[t._v("本应用所有数据均保存在本地，自动或手动清除浏览器缓存将可能导致数据丢失（确保浏览器已退出无痕模式），请妥善使用导出 / 导入功能。")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("隐私")]),a("div",{staticClass:"pt-1"},[t._v("本应用不会保存您的 Screeps 账号密码，所以在退出应用后您可能需要重新登录。")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("开源")]),a("div",{staticClass:"pt-1"},[a("span",[t._v("本应用代码已开源至 github。点击")]),a("a",{on:{click:function(e){return t.openPage(t.githubUrl)}}},[t._v(" 此处")]),a("span",[t._v(" 来访问本项目源码。")])])],1)],1)],1)],1)},Et=[],Nt=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.githubUrl="https://github.com/HoPGoldy/screeps-commander",t.homePage="https://hopgoldy.github.io/",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"openPage",value:function(t){window.open(t)}}]),e}(y["e"]);Nt=Object(C["a"])([y["a"]],Nt);var Ft=Nt,At=Ft,Wt=Object(L["a"])(At,$t,Et,!1,null,null,null),qt=Wt.exports;M()(Wt,{VCard:D["a"],VCardText:$["b"],VListItem:N["a"],VListItemContent:F["a"],VListItemTitle:F["c"]});var Jt={ButtonEdit:ot,ButtonConfig:bt,ShardSetter:kt,LoadConfig:St,SaveConfig:Dt,About:qt},Rt=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.items=[{title:"创建新按钮",comp:"button-edit",icon:"mdi-plus-box-multiple",persistent:!0},{title:"配置按钮",comp:"button-config",icon:"mdi-cursor-default-click",persistent:!1},{title:"设置 shard",comp:"shard-setter",icon:"mdi-server",persistent:!1},{title:"导出配置项",comp:"save-config",icon:"mdi-download-multiple",persistent:!1},{title:"导入配置项",comp:"load-config",icon:"mdi-upload-multiple",persistent:!1},{title:"关于",comp:"about",icon:"mdi-help-box",persistent:!1}],t.showSideDrawer=!1,t.showSidebar=!1,t.sidebarPersistent=!1,t.activeSidebar="save-config",t.showMessage=!1,t.messageColor="success",t.messageText="",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"onClickSidebar",value:function(t,e){this.showSidebar=!0,this.showSideDrawer=!1,this.activeSidebar=t,this.sidebarPersistent=e}},{key:"onSidebarFinish",value:function(t){this.showSidebar=!1,t.show&&this.message(t.color||"success",t.content||"设置成功")}},{key:"message",value:function(t,e){this.messageColor=t,this.messageText=e,this.showMessage=!0}},{key:"mounted",value:function(){}}]),e}(y["e"]);Rt=Object(C["a"])([Object(y["a"])({components:Object(m["a"])({},Jt)})],Rt);var Ht=Rt,Gt=Ht,Ut=(a("69ed"),a("7496")),Xt=a("40dc"),zt=a("5bc1"),Kt=a("a75b"),Qt=a("34c3"),Yt=a("f774"),Zt=a("2db4"),te=a("2a7f"),ee=Object(L["a"])(Gt,d,v,!1,null,"e519b348",null),ae=ee.exports;M()(ee,{VApp:Ut["a"],VAppBar:Xt["a"],VAppBarNavIcon:zt["a"],VBtn:U["a"],VContent:Kt["a"],VDialog:E["a"],VDivider:X["a"],VIcon:nt["a"],VList:vt["a"],VListItem:N["a"],VListItemContent:F["a"],VListItemIcon:Qt["a"],VListItemSubtitle:F["b"],VListItemTitle:F["c"],VNavigationDrawer:Yt["a"],VSnackbar:Zt["a"],VToolbarTitle:te["a"]});var ne=a("8c4f"),se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"console-container"},[a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.messageList,(function(t,e){return a("div",{key:e,staticClass:"item"},[a("ConsoleItem",{attrs:{content:t.content,icon:t.icon}})],1)})),0),a("div",{ref:"itemList",staticClass:"fill-block"}),a("v-text-field",{staticClass:"input-box ma-4 mr-8",attrs:{rounded:"",label:"键入命令",solo:"","hide-details":"",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendCommand(e)}},model:{value:t.inputCommand,callback:function(e){t.inputCommand=e},expression:"inputCommand"}}),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.inputCommand&&t.inputCommand.length>0,expression:"inputCommand && inputCommand.length > 0"}],staticClass:"fab-btn",attrs:{color:"green",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:t.sendCommand}},[a("v-icon",[t._v("mdi-arrow-right-thick")])],1)],1),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.inputCommand||t.inputCommand.length<=0,expression:"!inputCommand || inputCommand.length <= 0"}],staticClass:"fab-btn",attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(e){t.commandListVisiable=!0}}},[a("v-icon",[t._v("mdi-code-braces")])],1)],1)],1),a("command-list",{attrs:{show:t.commandListVisiable},on:{"on-close":function(e){t.commandListVisiable=!1},"on-select":t.getCommand}}),a("boot",{attrs:{show:t.bootVisable},on:{"on-finish":t.onLoginSuccess}}),a("login",{attrs:{show:t.loginVisable},on:{"on-success":t.onLoginSuccess}})],1)},ie=[],oe=(a("1276"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("3835")),ce=function(t){function e(){return Object(b["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"initScreepsApi",value:function(t){var e=this,a=this.getPlayerInfo(t),n=this.initWebSocket();return Promise.all([a,n]).then((function(t){var a=Object(oe["a"])(t,2),n=a[0],s=a[1];return e.playerInfo=n,e.authSessionToken(s,n.sessionToken)})).then((function(t){var a=t.ws,n=t.sessionToken;return console.log("准备就绪！",n,a),e.screepsWebSock=a,e.playerInfo.sessionToken=n,e.subscribeConsole(e.screepsWebSock,e.playerInfo.userId)}))}},{key:"initWebSocket",value:function(){var t=this;return new Promise((function(e,a){var n="wss://screeps.com/socket/".concat(t.getRandStr("number",3),"/").concat(t.getRandStr("string",8),"/websocket");console.log("TCL: ScreepsApi -> screepsUrl",n);var s=new WebSocket(n);s.onopen=function(){return e(s)},s.onerror=function(t){return a(t)}}))}},{key:"getPlayerInfo",value:function(t){return new Promise((function(e,a){l("/api/auth/me",{},{"X-token":t}).then((function(t){200===t.status&&1===t.data.ok?e({username:t.data.username,userId:t.data._id,money:t.data.money,sessionToken:t.config.headers["X-token"]}):a(t.status)}))}))}},{key:"sendConsoleExpression",value:function(t,e){this.playerInfo&&u("/api/user/console",{expression:t,shard:e},{"X-token":this.playerInfo.sessionToken}).then((function(t){console.log(t)}))}},{key:"authSessionToken",value:function(t,e){return new Promise((function(a,n){t.send('["auth '.concat(e,'"]')),t.onmessage=function(e){if("a"===e.data[0]){var s=JSON.parse(e.data.substring(1))[0];s.includes("auth ok")?a({ws:t,sessionToken:s.split(" ")[2]}):s.includes("auth failed")&&n(e)}}}))}},{key:"subscribeConsole",value:function(t,e){return new Promise((function(a){t.send('["subscribe user:'.concat(e,'/console"]')),console.log("已订阅控制台"),a(t)}))}},{key:"getSessionToken",value:function(t,e){return new Promise((function(a,n){u("/api/auth/signin",{email:t,password:e}).then((function(t){200===t.status&&1===t.data.ok?a(t.data.token):(console.log("123",t),n(t))})).catch((function(t){return n(t)}))}))}},{key:"getRandStr",value:function(t,e){for(var a="number"===t?"0123456789":"abcdefghijklmnopqrstuvwxyz",n="",s=0;s<e;s++)n+=a.charAt(Math.floor(Math.random()*a.length));return n}},{key:"getDataInMessage",value:function(t){return"a"===t[0]||"m"===t[0]?JSON.parse(t.substr(1,t.length)):[""]}},{key:"closeWebSocket",value:function(){this.screepsWebSock&&this.screepsWebSock.close()}}]),e}(y["e"]);ce=Object(C["a"])([y["a"]],ce);var re=ce,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-overlay",{attrs:{value:t.show}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",light:""}},[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[a("span",[t._v(t._s(t.currentTitle))])]),a("v-window",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("v-window-item",{attrs:{value:1}},[a("div",{staticClass:"pa-2 pt-0"},t._l(t.introduceContent,(function(e,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-bold"},[t._v(t._s(e.title))]),a("div",{staticClass:"content"},[t._v(t._s(e.text))])],1)],1)})),1)]),a("v-window-item",{attrs:{value:2}},[a("v-card-text",{staticClass:"pt-0"},[a("v-text-field",{attrs:{label:"Screeps 登陆邮箱","hide-details":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"mt-2",attrs:{label:"Screeps 登陆密码","hide-details":"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"mt-5 caption grey--text text--darken-1"},[t._v("本应用不会记录您的任何身份信息，所以在退出应用后将需要重新登录。")])],1)],1),a("v-window-item",{attrs:{value:3}},[a("div",{staticClass:"pa-2 pt-0 text-center"},[a("v-list-item",[a("v-list-item-content",[a("div",{staticClass:"title mb-4"},[t._v("欢迎回来！")]),a("div",{staticClass:"subtitle-1"},[t._v("现在你可以直接与 Screeps 控制台进行交互，所有控制台输出也会直接反馈到本应用中。")]),a("div",{staticClass:"subtitle-1"},[t._v("同时你也可以自定义快捷命令来快速执行某些常用操作。点击左上角菜单来了解更多操作。")])])],1)],1)])],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{disabled:1===t.step,text:""},on:{click:function(e){t.step--}}},[t._v("上一步")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:"",loading:t.confirmBtnLoading},on:{click:t.next}},[t._v("确认")])],1)],1),a("v-snackbar",{attrs:{color:t.messageColor},model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:"showMessage"}},[t._v(t._s(t.messageText)),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showMessage=!1}}},[t._v("关闭")])],1)],1)},ue=[],de=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.introduceContent=[{title:"数据",text:"本应用所有数据均保存在本地，自动或手动清除浏览器缓存将可能导致数据丢失（确保浏览器已退出无痕模式），请妥善使用导出 / 导入功能。"},{title:"开源",text:"本应用代码已开源至 github。更多信息请访问”关于“页。"}],t.step=1,t.email="",t.password="",t.sessionToken="",t.confirmBtnLoading=!1,t.showMessage=!1,t.messageColor="success",t.messageText="",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"finishBoot",value:function(){return V.init(),this.sessionToken}},{key:"next",value:function(){2===this.step?this.login():3===this.step?this.finishBoot():this.step++}},{key:"login",value:function(){var t=this;""!==this.email&&""!==this.password&&(this.confirmBtnLoading=!0,this.message("info","正在向 Screeps 服务器验证身份..."),this.getSessionToken(this.email,this.password).then((function(e){t.sessionToken=e,t.step++,t.message("success","验证成功"),t.confirmBtnLoading=!1})).catch((function(){t.confirmBtnLoading=!1,t.message("error","验证失败，请验证用户名密码是否正确")})))}},{key:"message",value:function(t,e){this.messageColor=t,this.messageText=e,this.showMessage=!0}},{key:"currentTitle",get:function(){switch(this.step){case 1:return"使用须知";case 2:return"账户确认";case 3:return"";default:return"初始化"}}}]),e}(Object(y["c"])(re));Object(C["a"])([Object(y["d"])()],de.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-finish")],de.prototype,"finishBoot",null),de=Object(C["a"])([y["a"]],de);var ve=de,me=ve,be=(a("d5c3"),a("a797")),pe=a("f665"),he=a("1e6c"),fe=Object(L["a"])(me,le,ue,!1,null,"5a45d2ed",null),ge=fe.exports;M()(fe,{VBtn:U["a"],VCard:D["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDivider:X["a"],VListItem:N["a"],VListItemContent:F["a"],VListItemTitle:F["c"],VOverlay:be["a"],VSnackbar:Zt["a"],VSpacer:z["a"],VTextField:K["a"],VWindow:pe["a"],VWindowItem:he["a"]});var Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-overlay",{attrs:{value:t.show}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",light:""}},[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("身份认证")]),a("v-card-text",{staticClass:"px-2 pb-2"},[a("v-text-field",{staticClass:"ma-2",attrs:{label:"Screeps 登陆邮箱","hide-details":"",disabled:t.loading},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{staticClass:"ma-2",attrs:{label:"Screeps 登陆密码","hide-details":"",type:"password",disabled:t.loading},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"ma-2 caption grey--text text--darken-1"},[t._v("本应用不会记录您的任何身份信息，所以在退出应用后将需要重新登录。")]),a("v-btn",{attrs:{color:"primary",block:"",depressed:"",loading:t.loading},on:{click:t.login}},[t._v("登陆")])],1)],1),a("v-snackbar",{attrs:{color:t.messageColor},model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:"showMessage"}},[t._v(t._s(t.messageText)),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showMessage=!1}}},[t._v("关闭")])],1)],1)},ye=[],ke=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.email="",t.password="",t.loading=!1,t.showMessage=!1,t.messageColor="success",t.messageText="",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"login",value:function(){var t=this;""!==this.email&&""!==this.password&&(this.loading=!0,this.message("info","正在向 Screeps 服务器验证身份..."),this.getSessionToken(this.email,this.password).then((function(e){t.message("success","验证成功"),t.loginSuccess(e)})).catch((function(){t.loading=!1,t.message("error","验证失败，请验证用户名密码是否正确")})))}},{key:"loginSuccess",value:function(t){return t}},{key:"message",value:function(t,e){this.messageColor=t,this.messageText=e,this.showMessage=!0}}]),e}(Object(y["c"])(re));Object(C["a"])([Object(y["d"])()],ke.prototype,"show",void 0),Object(C["a"])([Object(y["b"])("on-success")],ke.prototype,"loginSuccess",null),ke=Object(C["a"])([y["a"]],ke);var Oe=ke,je=Oe,we=(a("7119"),Object(L["a"])(je,Ce,ye,!1,null,"743185f0",null)),xe=we.exports;M()(we,{VBtn:U["a"],VCard:D["a"],VCardText:$["b"],VCardTitle:$["c"],VOverlay:be["a"],VSnackbar:Zt["a"],VTextField:K["a"]});var Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"console-item-contaienr"},[a("v-list-item",[a("v-list-item-icon",{staticClass:"my-3 mr-4"},[a("v-icon",[t._v(t._s(t.icon))])],1),a("v-list-item-content",[a("div",{ref:"content",staticClass:"message-content body-2"},t._l(t.content,(function(t){return a("div",{staticClass:"my-2"})})),0)])],1),a("v-divider")],1)},_e=[],Se=function(t){function e(){return Object(b["a"])(this,e),Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"mounted",value:function(){for(var t=this.$refs.content,e=0;e<t.children.length;e++)t.children[e].innerHTML=this.content[e]}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0})],Se.prototype,"content",void 0),Object(C["a"])([Object(y["d"])({required:!0})],Se.prototype,"icon",void 0),Se=Object(C["a"])([y["a"]],Se);var Ie=Se,Te=Ie,Pe=(a("2748"),Object(L["a"])(Te,Ve,_e,!1,null,"59e9984f",null)),Le=Pe.exports;M()(Pe,{VDivider:X["a"],VIcon:nt["a"],VListItem:N["a"],VListItemContent:F["a"],VListItemIcon:Qt["a"]});var Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-sheet",{on:{"click:outside":t.close},model:{value:t.sheetVisiable,callback:function(e){t.sheetVisiable=e},expression:"sheetVisiable"}},[a("v-list",t._l(t.commandListData,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("v-list-item",{on:{click:function(a){return t.onCommandClick(e)}}},[a("v-chip",{staticClass:"mr-3",attrs:{small:"",disabled:""}},[t._v(t._s(e.shard))]),a("span",{staticClass:"d-inline-block text-truncate text-no-wrap"},[t._v(t._s(e.title))])],1),n!=t.commandListData.length-1?a("v-divider"):t._e()],1)})),0),a("parameter-collecter",{attrs:{show:t.parameterCollecterVisiable},on:{"on-close":t.onParamClose,"on-finish":t.onParamFinish},model:{value:t.collectingParam,callback:function(e){t.collectingParam=e},expression:"collectingParam"}})],1)},Me=[],De=(a("4d63"),a("25f0"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"title font-weight-regular justify-space-between pb-1"},[t._v("请填写参数")]),t._l(t.paramInputs,(function(e,n){return a("div",{key:n,staticClass:"mx-2 px-2"},[a("v-text-field",{staticClass:"mb-4",attrs:{label:e.label,"hide-details":"",clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1)})),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{width:"100"},on:{click:t.close}},[t._v("放弃")]),a("v-spacer"),a("v-btn",{attrs:{width:"100",color:"primary",depressed:""},on:{click:t.returnParam}},[t._v("确认")])],1)],2)],1)}),$e=[],Ee=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.show=!1,t.paramInputs=[],t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"loadDefaultValue",value:function(t){t&&(this.paramInputs=this.value.map((function(t){return Object(m["a"])({},t,{value:t.default})})))}},{key:"close",value:function(){}},{key:"returnParam",value:function(){return this.paramInputs.map((function(t){return{match:t.match,value:t.value}}))}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0,default:[]})],Ee.prototype,"value",void 0),Object(C["a"])([Object(y["d"])({required:!0})],Ee.prototype,"show",void 0),Object(C["a"])([Object(y["f"])("show")],Ee.prototype,"loadDefaultValue",null),Object(C["a"])([Object(y["b"])("on-close")],Ee.prototype,"close",null),Object(C["a"])([Object(y["b"])("on-finish")],Ee.prototype,"returnParam",null),Ee=Object(C["a"])([y["a"]],Ee);var Ne=Ee,Fe=Ne,Ae=Object(L["a"])(Fe,De,$e,!1,null,"1ffb6b68",null),We=Ae.exports;M()(Ae,{VBtn:U["a"],VCard:D["a"],VCardActions:$["a"],VCardTitle:$["c"],VDialog:E["a"],VDivider:X["a"],VSpacer:z["a"],VTextField:K["a"]});var qe=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.sheetVisiable=!1,t.commandListData=[],t.parameterCollecterVisiable=!1,t.collectingParam=[],t.selectCommand="",t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"updateData",value:function(t){this.sheetVisiable=t,t&&(this.commandListData=V.get().commands)}},{key:"onCommandClick",value:function(t){t.param.length>0?(this.collectingParam=t.param,this.selectCommand=t.body,this.parameterCollecterVisiable=!0):this.sendCommand(t.body)}},{key:"sendCommand",value:function(t){return t}},{key:"close",value:function(){}},{key:"onParamClose",value:function(){this.parameterCollecterVisiable=!1}},{key:"onParamFinish",value:function(t){this.parameterCollecterVisiable=!1;var e=this.buildCommand(this.selectCommand,t);this.sendCommand(e)}},{key:"buildCommand",value:function(t,e){var a=t;return e.map((function(t){a=a.replace(new RegExp("\\".concat(t.match),"g"),t.value)})),a}}]),e}(y["e"]);Object(C["a"])([Object(y["d"])({required:!0,default:!1})],qe.prototype,"show",void 0),Object(C["a"])([Object(y["f"])("show")],qe.prototype,"updateData",null),Object(C["a"])([Object(y["b"])("on-select")],qe.prototype,"sendCommand",null),Object(C["a"])([Object(y["b"])("on-close")],qe.prototype,"close",null),qe=Object(C["a"])([Object(y["a"])({components:{ParameterCollecter:We}})],qe);var Je=qe,Re=Je,He=a("288c"),Ge=a("cc20"),Ue=Object(L["a"])(Re,Be,Me,!1,null,"2a8c3f54",null),Xe=Ue.exports;M()(Ue,{VBottomSheet:He["a"],VChip:Ge["a"],VDivider:X["a"],VList:vt["a"],VListItem:N["a"]});var ze=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(h["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.messageList=[],t.commandListVisiable=!1,t.inputCommand="",t.bootVisable=!1,t.loginVisable=!1,t}return Object(g["a"])(e,t),Object(p["a"])(e,[{key:"sendCommand",value:function(){!this.inputCommand||this.inputCommand.length<=0||(this.sendConsoleExpression(this.inputCommand,"shard3"),this.messageList.push({content:[this.inputCommand],icon:"mdi-arrow-top-left"}),this.inputCommand="",this.$vuetify.goTo(this.$refs.itemList,{duration:1e3}))}},{key:"getCommand",value:function(t){console.log("收到命令",t),this.commandListVisiable=!1,this.inputCommand=t,this.sendCommand()}},{key:"onMessage",value:function(t){if("a"===t.data[0])try{var e=JSON.parse(t.data.substring(1))[0],a=JSON.parse(e)[1],n=a.messages.results;if(n.length<=0)return;this.messageList.push({content:n[0].split("\n"),icon:"mdi-arrow-bottom-right"})}catch(s){}}},{key:"onLoginSuccess",value:function(t){var e=this;this.bootVisable=!1,this.loginVisable=!1,console.log("令牌为",t),this.initScreepsApi(t).then((function(t){t.onmessage=e.onMessage}))}},{key:"mounted",value:function(){V.exist?(V.init(),this.loginVisable=!0):this.bootVisable=!0}},{key:"destroyed",value:function(){this.closeWebSocket()}}]),e}(Object(y["c"])(re));ze=Object(C["a"])([Object(y["a"])({components:{ConsoleItem:Le,CommandList:Xe,Boot:ge,Login:xe}})],ze);var Ke=ze,Qe=Ke,Ye=(a("1dac"),a("0789")),Ze=a("1baa"),ta=Object(L["a"])(Qe,se,ie,!1,null,"6f8ae2b0",null),ea=ta.exports;M()(ta,{VBtn:U["a"],VFabTransition:Ye["c"],VIcon:nt["a"],VList:vt["a"],VListItemGroup:Ze["a"],VTextField:K["a"]}),n["a"].use(ne["a"]);var aa=[{path:"/",redirect:"/console"},{path:"/console",component:ea}],na=new ne["a"]({routes:aa}),sa=a("f309");n["a"].use(sa["a"]);var ia=new sa["a"]({}),oa=a("4eb5"),ca=a.n(oa);ca.a.config.autoSetContainer=!0,n["a"].use(ca.a),n["a"].config.productionTip=!1,new n["a"]({router:na,vuetify:ia,render:function(t){return t(ae)}}).$mount("#app")},d5c3:function(t,e,a){"use strict";var n=a("2c3b"),s=a.n(n);s.a}});
//# sourceMappingURL=app.3f58e6aa.js.map